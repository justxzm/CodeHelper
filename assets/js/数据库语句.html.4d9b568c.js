"use strict";(self.webpackChunkibmshelper=self.webpackChunkibmshelper||[]).push([[567],{997:(s,n,a)=>{a.r(n),a.d(n,{comp:()=>o,data:()=>l});var p=a(641);const e=[(0,p.Fv)('<h1 id="数据库语句" tabindex="-1"><a class="header-anchor" href="#数据库语句"><span>数据库语句</span></a></h1><h2 id="_1-业务相关" tabindex="-1"><a class="header-anchor" href="#_1-业务相关"><span>1 业务相关</span></a></h2><h3 id="【oracle保留三位小数】" tabindex="-1"><a class="header-anchor" href="#【oracle保留三位小数】"><span>【oracle保留三位小数】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token comment">-- 9是代表有多少宽度，如果格子定义不足会显示成######,如果定义多了会用空格代替</span></span>\n<span class="line"><span class="token comment">-- 0代表强制显示0，但是不会改变你的结果个位格子定义为0，预防转换的时候将0.56转换为.56</span></span>\n<span class="line"><span class="token comment">-- FM代表如果是因为9带来的空格则删除</span></span>\n<span class="line">TO_CHAR<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;FM999999999990.000&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">TO_CHAR<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;FM999999999999D000&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">TO_CHAR<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;FM999,999,999,990.000&#39;</span><span class="token punctuation">)</span> </span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【生成测试数据】" tabindex="-1"><a class="header-anchor" href="#【生成测试数据】"><span>【生成测试数据】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> ibms_712s_purchases<span class="token punctuation">.</span>w_wzwlcgqdb <span class="token keyword">where</span> id_<span class="token operator">&lt;=</span><span class="token number">400000</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">DECLARE</span></span>\n<span class="line">   i NUMBER :<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">-- 起始值为1</span></span>\n<span class="line"><span class="token keyword">BEGIN</span></span>\n<span class="line">   <span class="token keyword">WHILE</span> i <span class="token operator">&lt;=</span> <span class="token number">400000</span> <span class="token keyword">LOOP</span> <span class="token comment">-- 设置要生成的记录条数</span></span>\n<span class="line">      <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ibms_712s_purchases<span class="token punctuation">.</span>w_wzwlcgqdb <span class="token punctuation">(</span>id_<span class="token punctuation">,</span>ref_id_<span class="token punctuation">,</span> f_wzbm<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">&#39;1727138314747641856&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;WZ10001&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 根据需求修改列名和对应的值</span></span>\n<span class="line"></span>\n<span class="line">      <span class="token keyword">COMMIT</span><span class="token punctuation">;</span> <span class="token comment">-- 提交事务</span></span>\n<span class="line"></span>\n<span class="line">      i :<span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">-- 逐次自增i的值</span></span>\n<span class="line">   <span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【复制表单列表】" tabindex="-1"><a class="header-anchor" href="#【复制表单列表】"><span>【复制表单列表】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">UPDATE</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T1 <span class="token keyword">SET</span> </span>\n<span class="line">T1<span class="token punctuation">.</span>TEMPLATE_HTML_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>TEMPLATE_HTML_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>DISPLAY_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>DISPLAY_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>SORT_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>SORT_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>CONDITION_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>CONDITION_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>MANAGE_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>MANAGE_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>FILTER_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>FILTER_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>SCENE_SETTING_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>SCENE_SETTING_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>OPERATE_COL_WIDTH_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>OPERATE_COL_WIDTH_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>LABEL_WIDTH_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>LABEL_WIDTH_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>SHOW_DISPLAY_FIELD_SET_BTN_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>SHOW_DISPLAY_FIELD_SET_BTN_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1643184703328485376&#39;</span><span class="token punctuation">)</span> </span>\n<span class="line"><span class="token keyword">WHERE</span> T1<span class="token punctuation">.</span>ID_<span class="token operator">=</span><span class="token string">&#39;1775344915539034113&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">UPDATE</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T1 <span class="token keyword">SET</span> </span>\n<span class="line">T1<span class="token punctuation">.</span>TEMPLATE_HTML_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>TEMPLATE_HTML_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>DISPLAY_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>DISPLAY_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>SORT_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>SORT_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>CONDITION_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>CONDITION_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>MANAGE_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>MANAGE_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>FILTER_FIELD_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>FILTER_FIELD_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>SCENE_SETTING_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>SCENE_SETTING_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>OPERATE_COL_WIDTH_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>OPERATE_COL_WIDTH_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>LABEL_WIDTH_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>LABEL_WIDTH_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>SHOW_DISPLAY_FIELD_SET_BTN_<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> T2<span class="token punctuation">.</span>SHOW_DISPLAY_FIELD_SET_BTN_ <span class="token keyword">FROM</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_DATA_TEMPLATE T2 <span class="token keyword">WHERE</span> T2<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;xjdjtzlb&#39;</span><span class="token punctuation">)</span> </span>\n<span class="line"><span class="token keyword">WHERE</span> T1<span class="token punctuation">.</span>ALIAS_<span class="token operator">=</span><span class="token string">&#39;cgdjtz_sjst&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【树结构父子查询】" tabindex="-1"><a class="header-anchor" href="#【树结构父子查询】"><span>【树结构父子查询】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token comment"># 父子节点，树</span></span>\n<span class="line"><span class="token keyword">select</span> ID<span class="token punctuation">,</span>F_FJD<span class="token punctuation">,</span>F_JDMC<span class="token punctuation">,</span><span class="token keyword">LEVEL</span> <span class="token keyword">from</span> W_XMFLS <span class="token keyword">START</span> <span class="token keyword">WITH</span> ID<span class="token operator">=</span><span class="token number">10000029040035</span> <span class="token keyword">CONNECT</span> <span class="token keyword">by</span> PRIOR ID<span class="token operator">=</span>F_FJD</span>\n<span class="line"></span>\n<span class="line"><span class="token comment">#其他参考</span></span>\n<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> W_XTWTFKB <span class="token keyword">where</span> ID <span class="token operator">in</span> <span class="token punctuation">(</span></span>\n<span class="line">    <span class="token keyword">SELECT</span> id_ <span class="token keyword">FROM</span> W_XTWTFKB <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> PRIOR id_ <span class="token operator">=</span> f_glfkid <span class="token keyword">start</span> <span class="token keyword">WITH</span> id_ <span class="token operator">=</span> <span class="token number">10000000850070</span></span>\n<span class="line"><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【oracle按拼音排序】" tabindex="-1"><a class="header-anchor" href="#【oracle按拼音排序】"><span>【oracle按拼音排序】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> nlssort<span class="token punctuation">(</span>F_KTDH<span class="token punctuation">,</span><span class="token string">&#39;NLS_SORT=SCHINESE_PINYIN_M&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="【按wbs编号排序】" tabindex="-1"><a class="header-anchor" href="#【按wbs编号排序】"><span>【按WBS编号排序】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;+tableName+&quot;</span> <span class="token keyword">WHERE</span> F_SSXM <span class="token operator">LIKE</span> <span class="token string">&#39;&quot;+xmid+&quot;%&#39;</span> </span>\n<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> F_SSXM<span class="token punctuation">,</span>regexp_replace<span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token operator">||</span>F_JDBH<span class="token punctuation">,</span> <span class="token string">&#39;.&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.000000000000000000000000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;0+([^\\\\.]{24})&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;\\\\1&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">order</span> <span class="token keyword">by</span> regexp_replace<span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token operator">||</span>f_bh<span class="token punctuation">,</span> <span class="token string">&#39;.&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.000000000000000000000000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;0+([^\\.]{24})&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;\\1&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">ORDER</span> SIBLINGS <span class="token keyword">BY</span> to_number<span class="token punctuation">(</span>substr<span class="token punctuation">(</span>f_bh<span class="token punctuation">,</span> instr<span class="token punctuation">(</span>f_bh<span class="token punctuation">,</span> <span class="token string">&#39;.&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-1&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【wm-concat排序】" tabindex="-1"><a class="header-anchor" href="#【wm-concat排序】"><span>【wm_concat排序】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">SELECT</span> F_SQDH<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>F_WZBMS<span class="token punctuation">)</span> <span class="token keyword">AS</span> F_WZBMS <span class="token keyword">FROM</span> <span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> </span>\n<span class="line">T1<span class="token punctuation">.</span>ID_<span class="token punctuation">,</span></span>\n<span class="line">T1<span class="token punctuation">.</span>F_SQDH<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>ID_<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>F_WZBM<span class="token punctuation">,</span></span>\n<span class="line">WM_CONCAT<span class="token punctuation">(</span>T2<span class="token punctuation">.</span>F_WZBM<span class="token punctuation">)</span> <span class="token keyword">OVER</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> T1<span class="token punctuation">.</span>F_SQDH <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> T2<span class="token punctuation">.</span>F_WZBM <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> F_WZBMS</span>\n<span class="line"><span class="token keyword">FROM</span> IBMS_712S_PURCHASES<span class="token punctuation">.</span>W_WZWLCGSQB T1</span>\n<span class="line"><span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> IBMS_712S_PURCHASES<span class="token punctuation">.</span>W_WZWLCGQDB T2 <span class="token keyword">ON</span> T1<span class="token punctuation">.</span>ID_<span class="token operator">=</span>T2<span class="token punctuation">.</span>REF_ID_</span>\n<span class="line"><span class="token punctuation">)</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> F_SQDH <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> F_SQDH</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【包含字符串个数】" tabindex="-1"><a class="header-anchor" href="#【包含字符串个数】"><span>【包含字符串个数】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token punctuation">(</span>regexp_count<span class="token punctuation">(</span>T2<span class="token punctuation">.</span>F_dyqdhtid<span class="token punctuation">,</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> F_HTSL<span class="token punctuation">,</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="【merge-into从b到a】" tabindex="-1"><a class="header-anchor" href="#【merge-into从b到a】"><span>【MERGE INTO从B到A】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">UPDATE</span> A</span>\n<span class="line"><span class="token keyword">SET</span> A<span class="token punctuation">.</span>field <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> B<span class="token punctuation">.</span>field <span class="token keyword">FROM</span> B <span class="token keyword">WHERE</span> B<span class="token punctuation">.</span><span class="token keyword">key</span> <span class="token operator">=</span> A<span class="token punctuation">.</span><span class="token keyword">key</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> B <span class="token keyword">WHERE</span> B<span class="token punctuation">.</span><span class="token keyword">key</span> <span class="token operator">=</span> A<span class="token punctuation">.</span><span class="token keyword">key</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">MERGE</span> <span class="token keyword">INTO</span> A</span>\n<span class="line"><span class="token keyword">USING</span> B</span>\n<span class="line"><span class="token keyword">ON</span> <span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token keyword">key</span> <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token keyword">key</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">WHEN</span> <span class="token keyword">MATCHED</span> </span>\n<span class="line"><span class="token keyword">THEN</span> <span class="token keyword">UPDATE</span> <span class="token keyword">SET</span> A<span class="token punctuation">.</span>field <span class="token operator">=</span> B<span class="token punctuation">.</span>field<span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">merge</span> <span class="token keyword">into</span> test_emp  a   <span class="token comment">--需要操作的表 可以用别名</span></span>\n<span class="line"><span class="token keyword">using</span> emp b     </span>\n<span class="line"><span class="token keyword">on</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>EMPNO <span class="token operator">=</span> b<span class="token punctuation">.</span>EMPNO<span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">when</span> <span class="token keyword">matched</span> <span class="token keyword">then</span>              <span class="token comment">--当关联条件成立时 更新，删除，插入的where部分为可选 </span></span>\n<span class="line">  <span class="token keyword">update</span> <span class="token keyword">set</span>  a<span class="token punctuation">.</span>sal<span class="token operator">=</span> b<span class="token punctuation">.</span>sal <span class="token keyword">where</span> a<span class="token punctuation">.</span>empno <span class="token operator">=</span> <span class="token string">&#39;7566&#39;</span> <span class="token operator">or</span> a<span class="token punctuation">.</span>empno <span class="token operator">=</span> <span class="token string">&#39;7654&#39;</span></span>\n<span class="line">  <span class="token keyword">delete</span> <span class="token keyword">where</span> <span class="token punctuation">(</span>empno <span class="token operator">=</span> <span class="token string">&#39;7654&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">when</span> <span class="token operator">not</span> <span class="token keyword">matched</span> <span class="token keyword">then</span>    </span>\n<span class="line">  <span class="token keyword">insert</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>empno<span class="token punctuation">,</span> a<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> a<span class="token punctuation">.</span>job<span class="token punctuation">,</span> a<span class="token punctuation">.</span>mgr<span class="token punctuation">,</span> a<span class="token punctuation">.</span>hiredate<span class="token punctuation">,</span> a<span class="token punctuation">.</span>sal<span class="token punctuation">,</span> a<span class="token punctuation">.</span>comm<span class="token punctuation">,</span> a<span class="token punctuation">.</span>deptno<span class="token punctuation">)</span> </span>\n<span class="line">  <span class="token keyword">values</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>empno<span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> b<span class="token punctuation">.</span>job<span class="token punctuation">,</span> b<span class="token punctuation">.</span>mgr<span class="token punctuation">,</span> b<span class="token punctuation">.</span>hiredate<span class="token punctuation">,</span> b<span class="token punctuation">.</span>sal<span class="token punctuation">,</span> b<span class="token punctuation">.</span>comm<span class="token punctuation">,</span> b<span class="token punctuation">.</span>deptno<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">merge</span> <span class="token keyword">into</span> table_name  alias1   <span class="token comment">--目标表 可以用别名</span></span>\n<span class="line"><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token keyword">table</span><span class="token operator">|</span><span class="token keyword">view</span><span class="token operator">|</span>sub_query<span class="token punctuation">)</span> alias2      <span class="token comment">--数据源表 可以是表、视图、子查询</span></span>\n<span class="line"><span class="token keyword">on</span> <span class="token punctuation">(</span><span class="token keyword">join</span> condition<span class="token punctuation">)</span>   <span class="token comment">--关联条件</span></span>\n<span class="line"><span class="token keyword">when</span> <span class="token keyword">matched</span> <span class="token keyword">then</span>              <span class="token comment">--当关联条件成立时 更新，删除，插入的where部分为可选 </span></span>\n<span class="line">  <span class="token comment">--更新</span></span>\n<span class="line">  <span class="token keyword">update</span>  table_name <span class="token keyword">set</span>  col1<span class="token operator">=</span>colvalue  <span class="token keyword">where</span>……</span>\n<span class="line">  <span class="token comment">--删除  </span></span>\n<span class="line">  <span class="token keyword">delete</span> <span class="token keyword">from</span> table_name  <span class="token keyword">where</span>  col2<span class="token operator">=</span>colvalue  <span class="token keyword">where</span>……</span>\n<span class="line"><span class="token comment">--可以只更新不删除 也可以只删除不更新。</span></span>\n<span class="line"><span class="token comment">--如果更新和删除同时存在，删除的条件一定要在更新的条件内，否则数据不能删除。</span></span>\n<span class="line"><span class="token keyword">when</span> <span class="token operator">not</span> <span class="token keyword">matched</span> <span class="token keyword">then</span>      <span class="token comment">--当关联条件不成立时   </span></span>\n<span class="line">  <span class="token comment">--插入</span></span>\n<span class="line">  <span class="token keyword">insert</span> <span class="token punctuation">(</span>col3<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>col3values<span class="token punctuation">)</span>  <span class="token keyword">where</span>…… </span>\n<span class="line"><span class="token keyword">when</span> <span class="token operator">not</span> <span class="token keyword">matched</span>  <span class="token keyword">by</span> source <span class="token keyword">then</span>      <span class="token comment">--当源表不存在，目标表存在的数据删除</span></span>\n<span class="line">  <span class="token keyword">delete</span><span class="token punctuation">;</span> </span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【分组后取第一条】" tabindex="-1"><a class="header-anchor" href="#【分组后取第一条】"><span>【分组后取第一条】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">SELECT</span> F_WZBM<span class="token punctuation">,</span><span class="token string">&#39;最近价&#39;</span> <span class="token keyword">AS</span> F_GROUP<span class="token punctuation">,</span>F_BJ <span class="token keyword">FROM</span><span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span>row_number<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span> <span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> F_WZBM <span class="token keyword">order</span> <span class="token keyword">by</span> F_JBSJ <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">as</span> row_num <span class="token keyword">from</span> IBMS_712S_PURCHASES<span class="token punctuation">.</span>V_PRICINGHIS_BASIC</span>\n<span class="line"><span class="token punctuation">)</span> <span class="token keyword">WHERE</span> row_num<span class="token operator">=</span><span class="token number">1</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">SELECT</span> col1<span class="token punctuation">,</span> col2</span>\n<span class="line"><span class="token keyword">FROM</span> <span class="token punctuation">(</span></span>\n<span class="line">  <span class="token keyword">SELECT</span> col1<span class="token punctuation">,</span> col2<span class="token punctuation">,</span> row_number<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span> <span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> col1 <span class="token keyword">order</span> <span class="token keyword">by</span> col2<span class="token punctuation">)</span> <span class="token keyword">as</span> row_num</span>\n<span class="line">  <span class="token keyword">FROM</span> mytable</span>\n<span class="line"><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">WHERE</span> row_num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【行转列】" tabindex="-1"><a class="header-anchor" href="#【行转列】"><span>【行转列】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span><span class="token punctuation">(</span></span>\n<span class="line">    <span class="token comment">//TODO</span></span>\n<span class="line"><span class="token punctuation">)</span> <span class="token keyword">PIVOT</span> <span class="token punctuation">(</span><span class="token function">MAX</span><span class="token punctuation">(</span>F_BJ<span class="token punctuation">)</span> <span class="token keyword">FOR</span> F_GROUP <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">&#39;近一年&#39;</span> <span class="token keyword">AS</span> F_JYNZDJ<span class="token punctuation">,</span><span class="token string">&#39;近两年&#39;</span> <span class="token keyword">AS</span> F_JLNZDJ<span class="token punctuation">,</span><span class="token string">&#39;近三年&#39;</span> <span class="token keyword">AS</span> F_JSNZDJ <span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">pivot</span> <span class="token punctuation">(</span>聚合函数 <span class="token keyword">for</span> 转成列的字段名 <span class="token operator">in</span> <span class="token punctuation">(</span>转成的列名<span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-平台相关" tabindex="-1"><a class="header-anchor" href="#_2-平台相关"><span>2 平台相关</span></a></h2><h3 id="【表单控件小数位数修改】" tabindex="-1"><a class="header-anchor" href="#【表单控件小数位数修改】"><span>【表单控件小数位数修改】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">update</span> FORM_DEFINITION <span class="token keyword">set</span> expand_<span class="token operator">=</span><span class="token keyword">replace</span><span class="token punctuation">(</span>expand_<span class="token punctuation">,</span><span class="token string">&#39;&quot;decimalDigits&quot;:2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&quot;decimalDigits&quot;:3&#39;</span><span class="token punctuation">)</span> <span class="token keyword">where</span> FORM_KEY_<span class="token operator">=</span><span class="token string">&#39;htdkfp&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">update</span> FORM_DEFINITION <span class="token keyword">set</span> FORM_HTML_<span class="token operator">=</span><span class="token keyword">replace</span><span class="token punctuation">(</span>FORM_HTML_<span class="token punctuation">,</span><span class="token string">&#39;:precision=2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;:precision=3&#39;</span><span class="token punctuation">)</span> <span class="token keyword">where</span> FORM_KEY_<span class="token operator">=</span><span class="token string">&#39;htdkfp&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">update</span> FORM_META <span class="token keyword">set</span> expand_<span class="token operator">=</span><span class="token keyword">replace</span><span class="token punctuation">(</span>expand_<span class="token punctuation">,</span><span class="token string">&#39;&quot;decimalDigits&quot;:2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&quot;decimalDigits&quot;:3&#39;</span><span class="token punctuation">)</span> <span class="token keyword">where</span> KEY_<span class="token operator">=</span><span class="token string">&#39;htdkfp&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">update</span> FORM_DEFINITION <span class="token keyword">set</span> expand_<span class="token operator">=</span><span class="token keyword">replace</span><span class="token punctuation">(</span>expand_<span class="token punctuation">,</span><span class="token string">&#39;&quot;maxDecimalDigits&quot;:2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&quot;maxDecimalDigits&quot;:3&#39;</span><span class="token punctuation">)</span> <span class="token keyword">where</span> FORM_KEY_<span class="token operator">=</span><span class="token string">&#39;htdkfp&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">update</span> FORM_META <span class="token keyword">set</span> expand_<span class="token operator">=</span><span class="token keyword">replace</span><span class="token punctuation">(</span>expand_<span class="token punctuation">,</span><span class="token string">&#39;&quot;maxDecimalDigits&quot;:2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&quot;maxDecimalDigits&quot;:3&#39;</span><span class="token punctuation">)</span> <span class="token keyword">where</span> KEY_<span class="token operator">=</span><span class="token string">&#39;htdkfp&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【更新审批完成时间】" tabindex="-1"><a class="header-anchor" href="#【更新审批完成时间】"><span>【更新审批完成时间】</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token constant">UPDATE</span> <span class="token constant">IBMS_712S_PURCHASES</span><span class="token punctuation">.</span><span class="token constant">W_CGDJSQB</span> <span class="token constant">T1</span> <span class="token constant">SET</span> <span class="token constant">T1</span><span class="token punctuation">.</span><span class="token constant">F_DJWCSJ</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">T2</span><span class="token punctuation">.</span><span class="token constant">END_TIME_</span> <span class="token constant">FROM</span> <span class="token constant">IBMS_712S_ASSEMBLY</span><span class="token punctuation">.</span><span class="token constant">BPM_PRO_INST_HI</span> <span class="token constant">T2</span> <span class="token constant">WHERE</span> <span class="token constant">T2</span><span class="token punctuation">.</span><span class="token constant">BUSINESS_KEY_</span><span class="token operator">=</span><span class="token constant">T1</span><span class="token punctuation">.</span><span class="token constant">ID_</span> <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">T2</span><span class="token punctuation">.</span><span class="token constant">END_TIME_</span> <span class="token constant">DESC</span> <span class="token class-name">LIMIT</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token constant">WHERE</span> <span class="token constant">T1</span><span class="token punctuation">.</span><span class="token constant">F_XJDJZT</span><span class="token operator">=</span><span class="token char">&#39;已定价&#39;</span> <span class="token constant">AND</span> <span class="token constant">T1</span><span class="token punctuation">.</span><span class="token constant">F_DJWCSJ</span> <span class="token class-name">IS</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token constant">COMMIT</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【流程审批信息】" tabindex="-1"><a class="header-anchor" href="#【流程审批信息】"><span>【流程审批信息】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line">BPM_CHECK_OPINION</span>\n<span class="line">BPM_PRO_INST</span>\n<span class="line">BPM_PRO_INST_HI</span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">SELECT</span> </span>\n<span class="line">T1<span class="token punctuation">.</span>BUSINESS_KEY_<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>TASK_KEY_<span class="token punctuation">,</span></span>\n<span class="line">TO_CHAR<span class="token punctuation">(</span>T2<span class="token punctuation">.</span>COMPLETE_TIME_<span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd HH24:mi:ss&#39;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> F_SPSJ<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>AUDITOR_NAME_ <span class="token keyword">AS</span> F_SPR<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>AUDITOR_CODE_ <span class="token keyword">AS</span> F_SPRCODE<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>AUDITOR_ORG_NAME_ <span class="token keyword">AS</span> F_SPBM<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>AUDITOR_ORG_CODE_ <span class="token keyword">AS</span> F_SPBMCODE<span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> BPM_PRO_INST_HI <span class="token keyword">LIMIT</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> F_NUM</span>\n<span class="line"><span class="token keyword">FROM</span> BPM_PRO_INST_HI T1 <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> BPM_CHECK_OPINION T2 <span class="token keyword">ON</span> T1<span class="token punctuation">.</span>ID_<span class="token operator">=</span>T2<span class="token punctuation">.</span>PROC_INST_ID_</span>\n<span class="line"><span class="token keyword">WHERE</span> T1<span class="token punctuation">.</span>PROC_DEF_KEY_<span class="token operator">=</span><span class="token string">&#39;wzwlxzsplc&#39;</span> <span class="token operator">AND</span> T2<span class="token punctuation">.</span>TASK_KEY_ <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">&#39;StartEvent_9xi3wj3&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;UserTask_1dk4obk&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> T1<span class="token punctuation">.</span>BUSINESS_KEY_<span class="token punctuation">,</span>T2<span class="token punctuation">.</span>TASK_KEY_<span class="token punctuation">,</span>T1<span class="token punctuation">.</span>ID_ <span class="token keyword">DESC</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">//非启动、发起节点</span></span>\n<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>_props<span class="token punctuation">.</span><span class="token keyword">action</span> <span class="token operator">=</span><span class="token operator">=</span> <span class="token string">&#39;flow-edit&#39;</span> <span class="token operator">&amp;&amp;</span> _this<span class="token punctuation">.</span>nodeId<span class="token operator">!=</span><span class="token string">&quot;StartEvent_1d9gpfk&quot;</span> <span class="token operator">&amp;&amp;</span> _this<span class="token punctuation">.</span>nodeId<span class="token operator">!=</span><span class="token string">&quot;UserTask_1s7pxiz&quot;</span><span class="token punctuation">)</span> {</span>\n<span class="line">  <span class="token comment">//设置流程节点实际审批人、审批意见</span></span>\n<span class="line">  let setFlowUserInfo <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>opinionInfo<span class="token punctuation">,</span>nodeKey<span class="token punctuation">,</span>fieldName<span class="token punctuation">)</span>{</span>\n<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>opinionInfo<span class="token punctuation">[</span>nodeKey<span class="token punctuation">]</span><span class="token punctuation">)</span>{</span>\n<span class="line">      <span class="token keyword">data</span><span class="token punctuation">.</span>gwfbb<span class="token punctuation">[</span>fieldName<span class="token punctuation">]</span> <span class="token operator">=</span> opinionInfo<span class="token punctuation">[</span>nodeKey<span class="token punctuation">]</span><span class="token punctuation">.</span>USERNAME<span class="token punctuation">;</span></span>\n<span class="line">      <span class="token keyword">data</span><span class="token punctuation">.</span>gwfbb<span class="token punctuation">[</span>fieldName<span class="token operator">+</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> opinionInfo<span class="token punctuation">[</span>nodeKey<span class="token punctuation">]</span><span class="token punctuation">.</span>USERCODE<span class="token punctuation">;</span></span>\n<span class="line">    }</span>\n<span class="line">  }</span>\n<span class="line">  let opinionUrl <span class="token operator">=</span> <span class="token string">&#39;/official/myUtil/getFlowOpinions&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">  let params <span class="token operator">=</span> {<span class="token string">&quot;businessKey&quot;</span>:<span class="token keyword">data</span><span class="token punctuation">.</span>gwfbb<span class="token punctuation">.</span>id_<span class="token punctuation">,</span><span class="token string">&quot;flowDefKey&quot;</span>:<span class="token string">&quot;gwfblc&quot;</span>}<span class="token punctuation">;</span></span>\n<span class="line">  _req<span class="token punctuation">.</span>post<span class="token punctuation">(</span>opinionUrl<span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">then</span><span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">&gt;</span> {</span>\n<span class="line">    let flowOpinionInfo <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token keyword">data</span><span class="token punctuation">;</span></span>\n<span class="line">    setFlowUserInfo<span class="token punctuation">(</span>flowOpinionInfo<span class="token punctuation">,</span><span class="token string">&quot;UserTask_1j6pdgu&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zbbmld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//主办部门领导</span></span>\n<span class="line">    setFlowUserInfo<span class="token punctuation">(</span>flowOpinionInfo<span class="token punctuation">,</span><span class="token string">&quot;UserTask_1j6pdgu&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;shr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//审核人</span></span>\n<span class="line">    setFlowUserInfo<span class="token punctuation">(</span>flowOpinionInfo<span class="token punctuation">,</span><span class="token string">&quot;UserTask_0y2bqo6&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hgr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//核稿人</span></span>\n<span class="line">    setFlowUserInfo<span class="token punctuation">(</span>flowOpinionInfo<span class="token punctuation">,</span><span class="token string">&quot;UserTask_1avr0lp&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xhr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//校核人</span></span>\n<span class="line">    setFlowUserInfo<span class="token punctuation">(</span>flowOpinionInfo<span class="token punctuation">,</span><span class="token string">&quot;SignTask_08c3366&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hqr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//会签人</span></span>\n<span class="line">    <span class="token comment">//setFlowUserInfo(flowOpinionInfo,&quot;UserTask_17jfwku&quot;,&quot;qfr&quot;);//签发人</span></span>\n<span class="line">    <span class="token comment">//部门领导审批节点，汇总会签意见</span></span>\n<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>_this<span class="token punctuation">.</span>nodeId <span class="token operator">&amp;&amp;</span> _this<span class="token punctuation">.</span>nodeId<span class="token operator">=</span><span class="token operator">=</span><span class="token string">&quot;UserTask_1j6pdgu&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>flowOpinionInfo<span class="token punctuation">[</span><span class="token string">&quot;SignTask_08c3366&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>{</span>\n<span class="line">      <span class="token keyword">data</span><span class="token punctuation">.</span>gwfbb<span class="token punctuation">[</span><span class="token string">&quot;hqyj&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> flowOpinionInfo<span class="token punctuation">[</span><span class="token string">&quot;SignTask_08c3366&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>OPINION<span class="token punctuation">;</span><span class="token comment">//会签意见</span></span>\n<span class="line">    }</span>\n<span class="line">  }<span class="token punctuation">)</span></span>\n<span class="line">}</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【最后修改人】" tabindex="-1"><a class="header-anchor" href="#【最后修改人】"><span>【最后修改人】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">SELECT</span> REF_ID_<span class="token punctuation">,</span>USER_NAME_<span class="token punctuation">,</span>MODIFY_TIME_<span class="token punctuation">,</span>FIRSTNUM<span class="token punctuation">,</span>LASTNUM <span class="token keyword">FROM</span><span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span></span>\n<span class="line">ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> REF_ID_ <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> MODIFY_TIME_<span class="token punctuation">)</span> <span class="token keyword">AS</span> FIRSTNUM<span class="token punctuation">,</span></span>\n<span class="line">ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> REF_ID_ <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> MODIFY_TIME_ <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> LASTNUM <span class="token keyword">FROM</span> <span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> </span>\n<span class="line">T2<span class="token punctuation">.</span>REF_ID_<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>USER_NAME_<span class="token punctuation">,</span></span>\n<span class="line">T2<span class="token punctuation">.</span>MODIFY_TIME_</span>\n<span class="line"><span class="token keyword">FROM</span> W_WZWLMLB T1</span>\n<span class="line"><span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> IBMS_712S_ASSEMBLY<span class="token punctuation">.</span>FORM_MODIFY_RECORD T2 <span class="token keyword">ON</span> T2<span class="token punctuation">.</span>REF_ID_<span class="token operator">=</span>T1<span class="token punctuation">.</span>ID_</span>\n<span class="line"><span class="token punctuation">)</span></span>\n<span class="line"><span class="token punctuation">)</span> <span class="token keyword">WHERE</span> FIRSTNUM<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">OR</span> LASTNUM<span class="token operator">=</span><span class="token number">1</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【删除字段】" tabindex="-1"><a class="header-anchor" href="#【删除字段】"><span>【删除字段】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line">FORM_BO_ENT</span>\n<span class="line">FORM_BO_ATTR</span>\n<span class="line">FORM_FIELD</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【清理日志】" tabindex="-1"><a class="header-anchor" href="#【清理日志】"><span>【清理日志】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> log_item <span class="token keyword">where</span> execute_time_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-15&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> log_item <span class="token keyword">where</span> execute_time_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-15&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> log_error <span class="token keyword">where</span> RECORDING_TIME_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-15&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> log_error <span class="token keyword">where</span> RECORDING_TIME_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-15&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> log_login_item <span class="token keyword">where</span> RECORDING_TIME_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-15&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> log_login_item <span class="token keyword">where</span> RECORDING_TIME_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-15&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> form_history_record <span class="token keyword">where</span> CREATE_TIME_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-10&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> form_history_record <span class="token keyword">where</span> CREATE_TIME_<span class="token operator">&lt;</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2023-03-10&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【清理错误日志】" tabindex="-1"><a class="header-anchor" href="#【清理错误日志】"><span>【清理错误日志】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> log_error <span class="token keyword">where</span> to_char<span class="token punctuation">(</span>recording_time_<span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token operator">=</span>to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> log_error <span class="token keyword">where</span> to_char<span class="token punctuation">(</span>recording_time_<span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token operator">=</span>to_char<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">&#39;yyyy-MM-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【清理流程实例】" tabindex="-1"><a class="header-anchor" href="#【清理流程实例】"><span>【清理流程实例】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> ACT_RU_TASK T1 </span>\n<span class="line"><span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> BPM_PRO_INST T6 <span class="token keyword">ON</span> T1<span class="token punctuation">.</span>PROC_INST_ID_<span class="token operator">=</span>T6<span class="token punctuation">.</span>BPMN_INST_ID_</span>\n<span class="line"><span class="token keyword">WHERE</span> T6<span class="token punctuation">.</span>SUBJECT_ <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>BPMN_INST_ID_<span class="token punctuation">)</span> <span class="token keyword">FROM</span> BPM_PRO_INST <span class="token keyword">WHERE</span> SUBJECT_ <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>BPMN_INST_ID_<span class="token punctuation">)</span> <span class="token keyword">FROM</span> BPM_PRO_INST_HI <span class="token keyword">WHERE</span> SUBJECT_ <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> ACT_RU_TASK <span class="token keyword">WHERE</span> PROC_INST_ID_ <span class="token operator">IN</span> <span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> T1<span class="token punctuation">.</span>PROC_INST_ID_</span>\n<span class="line"><span class="token keyword">FROM</span> ACT_RU_TASK T1 </span>\n<span class="line"><span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> BPM_PRO_INST T6 <span class="token keyword">ON</span> T1<span class="token punctuation">.</span>PROC_INST_ID_<span class="token operator">=</span>T6<span class="token punctuation">.</span>BPMN_INST_ID_</span>\n<span class="line"><span class="token keyword">WHERE</span> T6<span class="token punctuation">.</span>SUBJECT_ <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span></span>\n<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> BPM_PRO_INST <span class="token keyword">WHERE</span> BPMN_INST_ID_ <span class="token operator">IN</span> <span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> BPMN_INST_ID_ <span class="token keyword">FROM</span> BPM_PRO_INST <span class="token keyword">WHERE</span> SUBJECT_ <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span></span>\n<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> BPM_PRO_INST_HI <span class="token keyword">WHERE</span> BPMN_INST_ID_ <span class="token operator">IN</span> <span class="token punctuation">(</span></span>\n<span class="line"><span class="token keyword">SELECT</span> BPMN_INST_ID_ <span class="token keyword">FROM</span> BPM_PRO_INST_HI <span class="token keyword">WHERE</span> SUBJECT_ <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span></span>\n<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> IBMS_712S_OFFICIAL<span class="token punctuation">.</span>W_SWYBB <span class="token keyword">WHERE</span> F_WJBT <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> IBMS_712S_OFFICIAL<span class="token punctuation">.</span>W_SWYBB <span class="token keyword">WHERE</span> F_WJBT <span class="token operator">LIKE</span> <span class="token string">&#39;%2023-06-27%&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-运维相关" tabindex="-1"><a class="header-anchor" href="#_3-运维相关"><span>3 运维相关</span></a></h2><h3 id="【视图授权】" tabindex="-1"><a class="header-anchor" href="#【视图授权】"><span>【视图授权】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> MESINTERFACE IDENTIFIED <span class="token keyword">BY</span> Pass111111<span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> IBMS_712S_PURCHASES<span class="token punctuation">.</span>V_PURCHASES_APPLY <span class="token keyword">TO</span> MESINTERFACE<span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> IBMS_712S_PURCHASES<span class="token punctuation">.</span>V_PURCHASES_APPLY<span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【达梦连接数】" tabindex="-1"><a class="header-anchor" href="#【达梦连接数】"><span>【达梦连接数】</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="line"><span class="token keyword">select</span> SF_GET_PARA_VALUE<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;MAX_SESSIONS&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">ALTER</span> SYSTEM <span class="token keyword">SET</span> <span class="token string">&#39;MAX_SESSIONS&#39;</span> <span class="token operator">=</span><span class="token number">1500</span> spfile<span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">commit</span><span class="token punctuation">;</span></span>\n<span class="line">systemctl <span class="token keyword">start</span> dmdbms<span class="token punctuation">.</span>service</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',46)],t={},o=(0,a(262).A)(t,[["render",function(s,n){return(0,p.uX)(),(0,p.CE)("div",null,e)}]]),l=JSON.parse('{"path":"/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E5%8F%A5.html","title":"数据库语句","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"1 业务相关","slug":"_1-业务相关","link":"#_1-业务相关","children":[{"level":3,"title":"【oracle保留三位小数】","slug":"【oracle保留三位小数】","link":"#【oracle保留三位小数】","children":[]},{"level":3,"title":"【生成测试数据】","slug":"【生成测试数据】","link":"#【生成测试数据】","children":[]},{"level":3,"title":"【复制表单列表】","slug":"【复制表单列表】","link":"#【复制表单列表】","children":[]},{"level":3,"title":"【树结构父子查询】","slug":"【树结构父子查询】","link":"#【树结构父子查询】","children":[]},{"level":3,"title":"【oracle按拼音排序】","slug":"【oracle按拼音排序】","link":"#【oracle按拼音排序】","children":[]},{"level":3,"title":"【按WBS编号排序】","slug":"【按wbs编号排序】","link":"#【按wbs编号排序】","children":[]},{"level":3,"title":"【wm_concat排序】","slug":"【wm-concat排序】","link":"#【wm-concat排序】","children":[]},{"level":3,"title":"【包含字符串个数】","slug":"【包含字符串个数】","link":"#【包含字符串个数】","children":[]},{"level":3,"title":"【MERGE INTO从B到A】","slug":"【merge-into从b到a】","link":"#【merge-into从b到a】","children":[]},{"level":3,"title":"【分组后取第一条】","slug":"【分组后取第一条】","link":"#【分组后取第一条】","children":[]},{"level":3,"title":"【行转列】","slug":"【行转列】","link":"#【行转列】","children":[]}]},{"level":2,"title":"2 平台相关","slug":"_2-平台相关","link":"#_2-平台相关","children":[{"level":3,"title":"【表单控件小数位数修改】","slug":"【表单控件小数位数修改】","link":"#【表单控件小数位数修改】","children":[]},{"level":3,"title":"【更新审批完成时间】","slug":"【更新审批完成时间】","link":"#【更新审批完成时间】","children":[]},{"level":3,"title":"【流程审批信息】","slug":"【流程审批信息】","link":"#【流程审批信息】","children":[]},{"level":3,"title":"【最后修改人】","slug":"【最后修改人】","link":"#【最后修改人】","children":[]},{"level":3,"title":"【删除字段】","slug":"【删除字段】","link":"#【删除字段】","children":[]},{"level":3,"title":"【清理日志】","slug":"【清理日志】","link":"#【清理日志】","children":[]},{"level":3,"title":"【清理错误日志】","slug":"【清理错误日志】","link":"#【清理错误日志】","children":[]},{"level":3,"title":"【清理流程实例】","slug":"【清理流程实例】","link":"#【清理流程实例】","children":[]}]},{"level":2,"title":"3 运维相关","slug":"_3-运维相关","link":"#_3-运维相关","children":[{"level":3,"title":"【视图授权】","slug":"【视图授权】","link":"#【视图授权】","children":[]},{"level":3,"title":"【达梦连接数】","slug":"【达梦连接数】","link":"#【达梦连接数】","children":[]}]}],"git":{},"filePathRelative":"数据库语句.md"}')}}]);