"use strict";(self.webpackChunkibmshelper=self.webpackChunkibmshelper||[]).push([[45],{803:(s,n,a)=>{a.r(n),a.d(n,{comp:()=>o,data:()=>l});var p=a(641);const t=[(0,p.Fv)('<h1 id="组件化页面" tabindex="-1"><a class="header-anchor" href="#组件化页面"><span>组件化页面</span></a></h1><h2 id="_1-功能性组件页面" tabindex="-1"><a class="header-anchor" href="#_1-功能性组件页面"><span>1 功能性组件页面</span></a></h2><h3 id="【导入页面定制】" tabindex="-1"><a class="header-anchor" href="#【导入页面定制】"><span>【导入页面定制】</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">_this<span class="token punctuation">.</span>customComponent <span class="token operator">=</span> _utils<span class="token punctuation">.</span><span class="token function">dynamicImport</span><span class="token punctuation">(</span><span class="token string">&#39;contract/views/subCompanyContract/contractImportDialog&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>sun<span class="token operator">-</span>dialog</span>\n<span class="line">    <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;importVisible&quot;</span></span>\n<span class="line">    width<span class="token operator">=</span><span class="token string">&quot;40%&quot;</span></span>\n<span class="line">    v<span class="token operator">-</span>drag<span class="token operator">-</span>dialog</span>\n<span class="line">  <span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>row <span class="token operator">:</span>gutter<span class="token operator">=</span><span class="token string">&quot;20&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;10&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tr mb10&quot;</span><span class="token operator">&gt;</span>选择文件<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tl mb10&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>upload</span>\n<span class="line">          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dib&quot;</span></span>\n<span class="line">          ref<span class="token operator">=</span><span class="token string">&quot;upload&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>action<span class="token operator">=</span><span class="token string">&quot;actionUrl&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>headers<span class="token operator">=</span><span class="token string">&quot;setHeaders&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>before<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">&quot;fileBeforeUpload&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>on<span class="token operator">-</span>success<span class="token operator">=</span><span class="token string">&quot;fileUploadSuccess&quot;</span></span>\n<span class="line">          accept<span class="token operator">=</span><span class="token string">&quot;.xlsx&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>on<span class="token operator">-</span>exceed<span class="token operator">=</span><span class="token string">&quot;handleExceed&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>limit<span class="token operator">=</span><span class="token string">&quot;1&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>multiple<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>auto<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>\n<span class="line">        <span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button slot<span class="token operator">=</span><span class="token string">&quot;trigger&quot;</span> size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>\n<span class="line">            <span class="token operator">&gt;</span>选择文件<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button</span>\n<span class="line">          <span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;10&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tr mt10&quot;</span><span class="token operator">&gt;</span>导入模板<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tl mt10&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>link</span>\n<span class="line">          size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span></span>\n<span class="line">          type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>underline<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>\n<span class="line">          @click<span class="token operator">=</span><span class="token string">&quot;handledownload&quot;</span></span>\n<span class="line">        <span class="token operator">&gt;</span></span>\n<span class="line">          下载导入模板</span>\n<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>sun<span class="token operator">-</span>tips title<span class="token operator">=</span><span class="token string">&quot;导入须知&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token number">1</span>、点击“下载导入模板”按钮，下载模板文件，然后按照模板要求填写需要导入的信息。<span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token number">2</span>、模板文件中“<span class="token operator">*</span>”表示必填。<span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token number">3</span>、“甲方全称”须在客户管理系统的子公司客户中存在。<span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token number">4</span>、上传文件类型必须为“<span class="token punctuation">.</span>xlsx”。<span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>sun<span class="token operator">-</span>tips<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dialog-footer&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">&quot;importVisible = false&quot;</span> size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span><span class="token operator">&gt;</span> 取消 <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>button</span>\n<span class="line">        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ml10&quot;</span></span>\n<span class="line">        size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span></span>\n<span class="line">        type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>\n<span class="line">        @click<span class="token operator">=</span><span class="token string">&quot;submitUpload&quot;</span></span>\n<span class="line">        element<span class="token operator">-</span>loading<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">&quot;导入中...&quot;</span></span>\n<span class="line">        v<span class="token operator">-</span>loading<span class="token punctuation">.</span>fullscreen<span class="token punctuation">.</span>lock<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span></span>\n<span class="line">        <span class="token operator">&gt;</span>导入<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button</span>\n<span class="line">      <span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>sun<span class="token operator">-</span>dialog<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> PropSync<span class="token punctuation">,</span> Prop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-property-decorator&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> SunDialog<span class="token punctuation">,</span> SunTips <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/ui&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> downloadFileByBlob <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/tools&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> msgTip <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/tools&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> getToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/storage&#39;</span></span>\n<span class="line"></span>\n<span class="line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;contractImportDialog&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    SunDialog<span class="token punctuation">,</span></span>\n<span class="line">    SunTips<span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">excelImportTemplateDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span>\n<span class="line">  @<span class="token function">PropSync</span><span class="token punctuation">(</span><span class="token string">&#39;visible&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> importVisible<span class="token operator">!</span><span class="token operator">:</span> boolean</span>\n<span class="line"></span>\n<span class="line">  <span class="token comment">// 标题</span></span>\n<span class="line">  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;子公司合同导入&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> title<span class="token operator">!</span><span class="token operator">:</span> string</span>\n<span class="line"></span>\n<span class="line">  <span class="token comment">// 下载模板名称</span></span>\n<span class="line">  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;子公司合同导入模板.xlsx&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> fileName<span class="token operator">!</span><span class="token operator">:</span> string</span>\n<span class="line"></span>\n<span class="line">  <span class="token comment">// 页面等待加载动画状态控制</span></span>\n<span class="line">  <span class="token keyword">private</span> loading <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">private</span> actionUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/sun/contract/subCcontract/importData</span><span class="token template-punctuation string">`</span></span></span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">private</span> setHeaders <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token comment">//文件导入前钩子</span></span>\n<span class="line">  <span class="token keyword">private</span> <span class="token function">fileBeforeUpload</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">file</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">var</span> testmsg <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token keyword">const</span> extension <span class="token operator">=</span> testmsg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;xlsx&#39;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span></span>\n<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>extension<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;导入数据文件只能是.xlsx格式!&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;warning&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token keyword">return</span> extension</span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token comment">//文件导入后钩子</span></span>\n<span class="line">  <span class="token keyword">private</span> <span class="token function">fileUploadSuccess</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">response</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">    <span class="token function">msgTip</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>importVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>setHeaders<span class="token punctuation">.</span>Authorization <span class="token keyword">as</span> string<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> string</span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">async</span> <span class="token function">submitUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>upload <span class="token keyword">as</span> any</span>\n<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>upload<span class="token punctuation">.</span>uploadFiles <span class="token operator">||</span> upload<span class="token punctuation">.</span>uploadFiles<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&#39;请选择要导入的excel文件!&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">      <span class="token keyword">return</span> <span class="token boolean">false</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">    upload<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">//下载模板</span></span>\n<span class="line">  <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">handledownload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span></span>\n<span class="line">      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contract/subCcontract/downLoadImportTemplate?fileName=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">responseType</span><span class="token operator">:</span> <span class="token string">&#39;blob&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token punctuation">)</span></span>\n<span class="line">    <span class="token function">downloadFileByBlob</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">handleExceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&#39;只能选择一个excel文件!&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【自定义组件列表】" tabindex="-1"><a class="header-anchor" href="#【自定义组件列表】"><span>【自定义组件列表】</span></a></h3><p>contract/views/subCompanyContract/subCcontractPreview</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//自定义组件过滤</span></span>\n<span class="line"><span class="token keyword">let</span> gxhtids <span class="token operator">=</span> data<span class="token punctuation">.</span>zgshtspb<span class="token punctuation">.</span>gxhtids<span class="token punctuation">;</span></span>\n<span class="line">gxhtids <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>gxhtids<span class="token operator">?</span> gxhtids<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;gm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;&#39;,&#39;&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">let</span> filterSqlSubCcontract <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ID_ IN (&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gxhtids<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>templateKeySubCcontract <span class="token operator">=</span> <span class="token string">&#39;zgshttz&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>filterSqlSubCcontract <span class="token operator">=</span> filterSqlSubCcontract<span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>子公司合同审批<span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;full&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>TemplatePreview</span>\n<span class="line">      <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;keyIndex&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>client<span class="token operator">-</span>num<span class="token operator">=</span><span class="token string">&quot;clientNum&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>template<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">&quot;templateKey&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>custom<span class="token operator">-</span>query<span class="token operator">-</span>params<span class="token operator">=</span><span class="token string">&quot;customQueryParams&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>selfDefinedParams<span class="token operator">=</span><span class="token string">&quot;selfDefinedParams&quot;</span></span>\n<span class="line">      @loadSuccess<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span></span>\n<span class="line">    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>TemplatePreview<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> TemplatePreview <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/views/dataTemplate/preview.vue&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLIENT_NUM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/consts&#39;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;SubCcontractPreview&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    TemplatePreview<span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">selfDefinedParams</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span></span>\n<span class="line">      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">keyIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">clientNum</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>clientNum <span class="token operator">||</span> <span class="token constant">CLIENT_NUM</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">templateKey</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>templateKeySubCcontract</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">customQueryParams</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>filterSqlSubCcontract</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">formData</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyIndex</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">handleConfirm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【自定义组件刷新】" tabindex="-1"><a class="header-anchor" href="#【自定义组件刷新】"><span>【自定义组件刷新】</span></a></h3><p>purchases/views/materialPurchase/form/virtualMatchPreview</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>一级库二级库配套详情台账<span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;full&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>TemplatePreview</span>\n<span class="line">      <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;keyIndex&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>client<span class="token operator">-</span>num<span class="token operator">=</span><span class="token string">&quot;clientNum&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>template<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">&quot;templateKey&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>custom<span class="token operator">-</span>query<span class="token operator">-</span>params<span class="token operator">=</span><span class="token string">&quot;customQueryParams&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>selfDefinedParams<span class="token operator">=</span><span class="token string">&quot;selfDefinedParams&quot;</span></span>\n<span class="line">      @loadSuccess<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span></span>\n<span class="line">    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>TemplatePreview<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> TemplatePreview <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/views/dataTemplate/preview.vue&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLIENT_NUM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/consts&#39;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;VirtualMatchPreview&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    TemplatePreview<span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">selfDefinedParams</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span></span>\n<span class="line">      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">formData</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span></span>\n<span class="line">      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">keyIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">templateKey</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>templateKeyVirtualMatch<span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">customQueryParams</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>filterSqlVirtualMatch<span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">clientNum</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>clientNum <span class="token operator">||</span> <span class="token constant">CLIENT_NUM</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">selfDefinedParams</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>customQueryParams <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfDefinedParams<span class="token punctuation">.</span>filterSqlVirtualMatch</span>\n<span class="line">        <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyIndex</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">formData</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyIndex</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">handleConfirm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【自定义对话框-vue定制】" tabindex="-1"><a class="header-anchor" href="#【自定义对话框-vue定制】"><span>【自定义对话框，vue定制】</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"># 值来源<span class="token operator">-</span>参数传入</span>\n<span class="line">_this<span class="token punctuation">.</span>customComponent <span class="token operator">=</span> _utils<span class="token punctuation">.</span><span class="token function">dynamicImport</span><span class="token punctuation">(</span><span class="token string">&#39;purchases/views/materialPurchase/preview/storageSelectDialog&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>wzbm <span class="token operator">=</span> <span class="token string">&#39;WZ10001&#39;</span><span class="token punctuation">;</span><span class="token comment">//物资编码</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>cgbmcode <span class="token operator">=</span> <span class="token string">&#39;Z005&#39;</span><span class="token punctuation">;</span><span class="token comment">//采购部门code</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponent <span class="token operator">=</span> _utils<span class="token punctuation">.</span><span class="token function">dynamicImport</span><span class="token punctuation">(</span><span class="token string">&#39;purchases/views/materialPurchase/preview/kcrecheckStorageSelect&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>initData <span class="token operator">=</span> _this<span class="token punctuation">.</span>data<span class="token punctuation">.</span>wzfysqb<span class="token punctuation">.</span>initData<span class="token punctuation">.</span>wzfyqdb<span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>人工配套，物资选择<span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>sun<span class="token operator">-</span>dialog</span>\n<span class="line">    <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span></span>\n<span class="line">    title<span class="token operator">=</span><span class="token string">&quot;库房库位物资选择&quot;</span></span>\n<span class="line">    @confirm<span class="token operator">=</span><span class="token string">&quot;handleSave&quot;</span></span>\n<span class="line">    width<span class="token operator">=</span><span class="token string">&quot;80%&quot;</span></span>\n<span class="line">  <span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;full&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>custom<span class="token operator">-</span>dialog<span class="token operator">-</span>show<span class="token operator">-</span>detail</span>\n<span class="line">        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;dialogDetailVisible&quot;</span></span>\n<span class="line">        ref<span class="token operator">=</span><span class="token string">&quot;customDialogShowDetail&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>alias<span class="token operator">=</span><span class="token string">&quot;alias&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>custom<span class="token operator">-</span>dialog<span class="token operator">=</span><span class="token string">&quot;customDialog&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>client<span class="token operator">-</span>num<span class="token operator">=</span><span class="token string">&quot;clientNum&quot;</span></span>\n<span class="line">        @confirm<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span></span>\n<span class="line">      <span class="token operator">/</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>sun<span class="token operator">-</span>dialog<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropSync<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-property-decorator&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> SunDialog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/ui&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> CustomDialogShowDetail <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/views/customDialog/CustomDialogShowDetail.vue&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> getDialogByAlias <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/api/customDialog&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLIENT_NUM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/consts&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;StorageSelectDialog&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> SunDialog<span class="token punctuation">,</span> CustomDialogShowDetail <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">StorageSelectDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span>\n<span class="line">  @<span class="token function">PropSync</span><span class="token punctuation">(</span><span class="token string">&#39;visible&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> dialogVisible<span class="token operator">!</span><span class="token operator">:</span> boolean</span>\n<span class="line">  @<span class="token function">Prop</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> customComponentParams<span class="token operator">!</span><span class="token operator">:</span> any</span>\n<span class="line">  @<span class="token function">Ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> customDialogShowDetail<span class="token operator">!</span><span class="token operator">:</span> any</span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">private</span> alias <span class="token operator">=</span> <span class="token string">&#39;wzwlcg_cghs_kfkwwzxz&#39;</span></span>\n<span class="line">  <span class="token keyword">private</span> customDialog <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line">  <span class="token keyword">private</span> dialogDetailVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">  <span class="token keyword">private</span> clientNum <span class="token operator">=</span> <span class="token constant">CLIENT_NUM</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">getDialogByAlias</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>alias<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientNum<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">res</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">let</span> cust <span class="token operator">=</span> res<span class="token punctuation">.</span>data</span>\n<span class="line">      cust<span class="token punctuation">.</span>displayfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>displayfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>resultfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>resultfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>sortfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>sortfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">//数量大于0</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> <span class="token string">&#39;启用&#39;</span> <span class="token comment">//状态</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> <span class="token string">&#39;物资物料采购&#39;</span> <span class="token comment">//数据来源</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>wzbm <span class="token comment">//物资编码</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>cgbmcode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>localStorage<span class="token punctuation">.</span>orgCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token comment">//所属部门code</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>querys <span class="token operator">=</span> cust<span class="token punctuation">.</span>conditionfield</span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>customDialog <span class="token operator">=</span> cust</span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogDetailVisible <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">handleSave</span><span class="token punctuation">(</span><span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>customDialogShowDetail<span class="token punctuation">.</span><span class="token function">handleSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">handleConfirm</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">selected</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>dialogDetailVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">    <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span></span>\n<span class="line">    <span class="token keyword">let</span> cgqdId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>cgqdId</span>\n<span class="line">    <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">cgqdId</span><span class="token operator">:</span> cgqdId<span class="token punctuation">,</span> <span class="token literal-property property">selected</span><span class="token operator">:</span> selected <span class="token punctuation">}</span></span>\n<span class="line">    request</span>\n<span class="line">      <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/purchases/materialStorage/bindMatch</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> params<span class="token punctuation">)</span></span>\n<span class="line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">res</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">          _this<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;人工配套成功&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">          location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">          _this<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>message<span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>库存复验，物资选择<span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>sun<span class="token operator">-</span>dialog</span>\n<span class="line">    <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span></span>\n<span class="line">    title<span class="token operator">=</span><span class="token string">&quot;库房库位物资选择&quot;</span></span>\n<span class="line">    @confirm<span class="token operator">=</span><span class="token string">&quot;handleSave&quot;</span></span>\n<span class="line">    width<span class="token operator">=</span><span class="token string">&quot;80%&quot;</span></span>\n<span class="line">  <span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;full&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>custom<span class="token operator">-</span>dialog<span class="token operator">-</span>show<span class="token operator">-</span>detail</span>\n<span class="line">        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;dialogDetailVisible&quot;</span></span>\n<span class="line">        ref<span class="token operator">=</span><span class="token string">&quot;customDialogShowDetail&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>alias<span class="token operator">=</span><span class="token string">&quot;alias&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>custom<span class="token operator">-</span>dialog<span class="token operator">=</span><span class="token string">&quot;customDialog&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>client<span class="token operator">-</span>num<span class="token operator">=</span><span class="token string">&quot;clientNum&quot;</span></span>\n<span class="line">        @confirm<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span></span>\n<span class="line">      <span class="token operator">/</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>sun<span class="token operator">-</span>dialog<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropSync<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-property-decorator&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> SunDialog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/ui&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> CustomDialogShowDetail <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/views/customDialog/CustomDialogShowDetail.vue&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> getDialogByAlias <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/api/customDialog&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLIENT_NUM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/consts&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> utils <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;StorageSelectDialog&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> SunDialog<span class="token punctuation">,</span> CustomDialogShowDetail <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">StorageSelectDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span>\n<span class="line">  @<span class="token function">PropSync</span><span class="token punctuation">(</span><span class="token string">&#39;visible&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> dialogVisible<span class="token operator">!</span><span class="token operator">:</span> boolean</span>\n<span class="line">  @<span class="token function">Prop</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> customComponentParams<span class="token operator">!</span><span class="token operator">:</span> any</span>\n<span class="line">  @<span class="token function">Ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token keyword">private</span> customDialogShowDetail<span class="token operator">!</span><span class="token operator">:</span> any</span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">private</span> alias <span class="token operator">=</span> <span class="token string">&#39;wzwlcg_kcfy_kfwzxz&#39;</span></span>\n<span class="line">  <span class="token keyword">private</span> customDialog <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line">  <span class="token keyword">private</span> dialogDetailVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">  <span class="token keyword">private</span> clientNum <span class="token operator">=</span> <span class="token constant">CLIENT_NUM</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span></span>\n<span class="line">    <span class="token function">getDialogByAlias</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>alias<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientNum<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">res</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">let</span> cust <span class="token operator">=</span> res<span class="token punctuation">.</span>data</span>\n<span class="line">      cust<span class="token punctuation">.</span>displayfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>displayfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>resultfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>resultfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>sortfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>sortfield<span class="token punctuation">)</span></span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">)</span></span>\n<span class="line">      <span class="token comment">//标识库存类型</span></span>\n<span class="line">      <span class="token keyword">let</span> kclx <span class="token operator">=</span> _this<span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>kclx</span>\n<span class="line">      <span class="token keyword">let</span> kcqdIds <span class="token operator">=</span> _this<span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>kcqdIds</span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> kclx</span>\n<span class="line">      cust<span class="token punctuation">.</span>conditionfield<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> kcqdIds</span>\n<span class="line">      cust<span class="token punctuation">.</span>querys <span class="token operator">=</span> cust<span class="token punctuation">.</span>conditionfield</span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>customDialog <span class="token operator">=</span> cust</span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogDetailVisible <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token function">handleSave</span><span class="token punctuation">(</span><span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>customDialogShowDetail<span class="token punctuation">.</span><span class="token function">handleSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">async</span> <span class="token function">handleConfirm</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">selected</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token comment">//初始化重要类别、供应商</span></span>\n<span class="line">    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span></span>\n<span class="line">      <span class="token string">&#39;/purchases/recheckApply/fillOtherSubInfo&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      selected</span>\n<span class="line">    <span class="token punctuation">)</span></span>\n<span class="line">    selected <span class="token operator">=</span> res<span class="token punctuation">.</span>data</span>\n<span class="line">    <span class="token comment">//获取表单对象</span></span>\n<span class="line">    <span class="token keyword">let</span> formVm <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">getOnlineFormInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token keyword">let</span> initData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>initData</span>\n<span class="line">    selected<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">let</span> <span class="token literal-property property">data</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> fieldName <span class="token keyword">in</span> initData<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">let</span> fieldVal <span class="token operator">=</span> item<span class="token punctuation">[</span>fieldName<span class="token punctuation">]</span></span>\n<span class="line">        fieldVal <span class="token operator">=</span> fieldVal <span class="token operator">||</span> fieldVal <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> fieldVal <span class="token operator">:</span> <span class="token string">&#39;&#39;</span></span>\n<span class="line">        data<span class="token punctuation">[</span>fieldName<span class="token punctuation">]</span> <span class="token operator">=</span> fieldVal</span>\n<span class="line">        <span class="token comment">//eval(`data[fieldName] = &#39;${fieldVal}&#39;`)</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">      formVm<span class="token punctuation">.</span>data<span class="token punctuation">.</span>wzfysqb<span class="token punctuation">.</span>sub_wzfyqdb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>dialogDetailVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【人员选择器-vue定制】" tabindex="-1"><a class="header-anchor" href="#【人员选择器-vue定制】"><span>【人员选择器，vue定制】</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>checkedTableData<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>\n<span class="line">    _this<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&quot;请选择数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">let</span> ids <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>\n<span class="line">  _this<span class="token punctuation">.</span>checkedTableData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>\n<span class="line">          ids <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>ids<span class="token operator">?</span> <span class="token string">&quot;,&quot;</span><span class="token operator">+</span>item<span class="token punctuation">.</span>id_<span class="token operator">:</span>item<span class="token punctuation">.</span>id_<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  _this<span class="token punctuation">.</span>customComponent <span class="token operator">=</span> _utils<span class="token punctuation">.</span><span class="token function">dynamicImport</span><span class="token punctuation">(</span><span class="token string">&#39;purchases/views/materialPurchase/select/myUserSelectDialog&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  _this<span class="token punctuation">.</span>customComponentParams <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">          <span class="token literal-property property">reqUrl</span><span class="token operator">:</span><span class="token string">&#39;/purchases/myUtil/updateStatus&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">reqParam</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">ids</span><span class="token operator">:</span>ids<span class="token punctuation">,</span><span class="token literal-property property">tableName</span><span class="token operator">:</span><span class="token string">&#39;W_cgdjsqb&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">fieldName</span><span class="token operator">:</span><span class="token string">&#39;f_htzg,f_htzgcode&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">status</span><span class="token operator">:</span><span class="token string">&#39;resUsername,resUsercode&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">paramPreEvent</span><span class="token operator">:</span><span class="token string">&#39;this.customComponentParams.reqParam.status=`${users[0].name},${users[0].code}`&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">successMsg</span><span class="token operator">:</span><span class="token string">&#39;设置成功&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line">  _this<span class="token punctuation">.</span>customComponentVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>人员选择器<span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>user<span class="token operator">-</span>selector<span class="token operator">-</span>dialog</span>\n<span class="line">    v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>single<span class="token operator">=</span><span class="token string">&quot;single&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>border<span class="token operator">=</span><span class="token string">&quot;true&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>isFilterByCurSecurity<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>filterIsIncludeSub<span class="token operator">=</span><span class="token string">&quot;false&quot;</span></span>\n<span class="line">    v<span class="token operator">-</span>drag<span class="token operator">-</span>dialog</span>\n<span class="line">    <span class="token operator">:</span>clientNum<span class="token operator">=</span><span class="token string">&quot;clientNum&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>filter<span class="token operator">=</span><span class="token string">&quot;roleFilter&quot;</span></span>\n<span class="line">    @confirm<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span></span>\n<span class="line">  <span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>user<span class="token operator">-</span>selector<span class="token operator">-</span>dialog<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> PropSync<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-property-decorator&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> UserSelectorDialog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/mdm&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLIENT_NUM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/consts&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;MyUserSelectDialog&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> UserSelectorDialog <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyUserSelectDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span></span>\n<span class="line">  @<span class="token function">PropSync</span><span class="token punctuation">(</span><span class="token string">&#39;visible&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> dialogVisible<span class="token operator">!</span><span class="token operator">:</span> boolean</span>\n<span class="line">  @<span class="token function">Prop</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span> customComponentParams<span class="token operator">!</span><span class="token operator">:</span> any</span>\n<span class="line">  <span class="token keyword">private</span> clientNum <span class="token operator">=</span> <span class="token constant">CLIENT_NUM</span></span>\n<span class="line">  <span class="token keyword">private</span> single <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>single <span class="token operator">||</span> <span class="token boolean">true</span></span>\n<span class="line">  <span class="token keyword">private</span> reqNum <span class="token operator">=</span> <span class="token number">0</span></span>\n<span class="line">  <span class="token keyword">private</span> roleFilter <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token constant">Q</span>$role_code$<span class="token constant">S</span><span class="token operator">:</span> <span class="token string">&#39;cghtzg&#39;</span> <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">private</span> <span class="token function">handleConfirm</span><span class="token punctuation">(</span>users<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reqNum <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>reqNum</span>\n<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">return</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>paramPreEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>paramPreEvent<span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span></span>\n<span class="line">    request</span>\n<span class="line">      <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>reqUrl<span class="token punctuation">,</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>reqParam</span>\n<span class="line">      <span class="token punctuation">)</span></span>\n<span class="line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>resp <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">          _this<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>successMsg<span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">          _this<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resp <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>message<span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">        _this<span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">        <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">        _this<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span> </span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-显示性组件页面" tabindex="-1"><a class="header-anchor" href="#_2-显示性组件页面"><span>2 显示性组件页面</span></a></h2><h3 id="【时间轴事件显示】" tabindex="-1"><a class="header-anchor" href="#【时间轴事件显示】"><span>【时间轴事件显示】</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 时间线控件 <span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 弹框方式使用示例：<span class="token punctuation">.</span><span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;myTimeline&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>timeline <span class="token operator">:</span>reverse<span class="token operator">=</span><span class="token string">&quot;false&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;margin-left: 5px&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>timeline<span class="token operator">-</span>item</span>\n<span class="line">        v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(activity, index) in activities&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">&quot;activity.icon&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>type<span class="token operator">=</span><span class="token string">&quot;activity.type&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>color<span class="token operator">=</span><span class="token string">&quot;activity.color&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;activity.size&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>timestamp<span class="token operator">=</span><span class="token string">&quot;activity.timestamp&quot;</span></span>\n<span class="line">        <span class="token operator">:</span>placement<span class="token operator">=</span><span class="token string">&quot;placement&quot;</span></span>\n<span class="line">      <span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>card <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box-card&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">&quot;header&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;clearfix&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">              <span class="token operator">&lt;</span>el<span class="token operator">-</span>col</span>\n<span class="line">                <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;headerCol.span&quot;</span></span>\n<span class="line">                <span class="token operator">:</span>offset<span class="token operator">=</span><span class="token string">&quot;headerCol.offset&quot;</span></span>\n<span class="line">                v<span class="token operator">-</span>bind<span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">                v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(headerCol, index) in activity.headerCols&quot;</span></span>\n<span class="line">                <span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> headerCol<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col</span>\n<span class="line">              <span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;float: left&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> activity<span class="token punctuation">.</span>headerLeft <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;float: right&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> activity<span class="token punctuation">.</span>headerRight <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span>el<span class="token operator">-</span>row</span>\n<span class="line">            v<span class="token operator">-</span>bind<span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">            v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(content, index) in activity.contents&quot;</span></span>\n<span class="line">          <span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;24&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> content <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>timeline<span class="token operator">-</span>item<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>timeline<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;timelineDemo&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">activities</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//时间线数据</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>activities <span class="token operator">=</span> <span class="token punctuation">[</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;正文内容&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token string">&#39;2018-04-03 20:46 王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&#39;large&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;#0bbd87&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">headerCols</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>\n<span class="line">          <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token literal-property property">span</span><span class="token operator">:</span> <span class="token string">&#39;7&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;说明：表头填充示例01&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token literal-property property">span</span><span class="token operator">:</span> <span class="token string">&#39;8&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;开始时间：2023-05-23&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token literal-property property">span</span><span class="token operator">:</span> <span class="token string">&#39;7&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;结束时间：2023-05-31&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;正文内容&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;第二行内容&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token string">&#39;2018-04-03 20:46 王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">headerLeft</span><span class="token operator">:</span> <span class="token string">&#39;说明：文本填充示例02&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">headerRight</span><span class="token operator">:</span> <span class="token string">&#39;非密&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;支持使用图标&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token string">&#39;2018-04-12 20:46 王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&#39;large&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;primary&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;el-icon-more&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;支持自定义颜色&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token string">&#39;2018-04-03 20:46 王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;#0bbd87&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;支持自定义尺寸&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token string">&#39;2018-04-03 20:46 王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&#39;large&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;默认样式的节点&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token string">&#39;2018-04-03 20:46 王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">]</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span> scoped<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token punctuation">.</span>myTimeline <span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token punctuation">.</span>el<span class="token operator">-</span>timeline<span class="token operator">-</span>item__timestamp <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">303133</span><span class="token punctuation">;</span></span>\n<span class="line">    font<span class="token operator">-</span>size<span class="token operator">:</span> 14px<span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 时间线控件 <span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用示例</span>\n<span class="line">_this<span class="token punctuation">.</span>customComponent <span class="token operator">=</span> _utils<span class="token punctuation">.</span><span class="token function">dynamicImport</span><span class="token punctuation">(</span><span class="token string">&#39;projectTools/views/timeline/index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentParams <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;线索跟进情况&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">reqUrl</span><span class="token operator">:</span><span class="token string">&#39;/pm/projectFollowUp/getTimelineData&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">reqParam</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">refId</span><span class="token operator">:</span>_row<span class="token punctuation">.</span><span class="token constant">W_XSXXB_ID_</span><span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line">_this<span class="token punctuation">.</span>customComponentVisible <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line"><span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>sun<span class="token operator">-</span>dialog</span>\n<span class="line">    v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;dialogVisible&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>width<span class="token operator">=</span><span class="token string">&quot;width&quot;</span></span>\n<span class="line">    <span class="token operator">:</span>noBtn<span class="token operator">=</span><span class="token string">&quot;true&quot;</span></span>\n<span class="line">    v<span class="token operator">-</span>drag<span class="token operator">-</span>dialog</span>\n<span class="line">    v<span class="token operator">-</span>zoom<span class="token operator">-</span>dialog</span>\n<span class="line">  <span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;myTimeline&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;height&quot;</span> v<span class="token operator">-</span>loading<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>timeline <span class="token operator">:</span>reverse<span class="token operator">=</span><span class="token string">&quot;reverse&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;margin-left: 5px&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>timeline<span class="token operator">-</span>item</span>\n<span class="line">          v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(activity, index) in activities&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">&quot;activity.icon&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>type<span class="token operator">=</span><span class="token string">&quot;activity.type&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>color<span class="token operator">=</span><span class="token string">&quot;activity.color&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;activity.size&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>timestamp<span class="token operator">=</span><span class="token string">&quot;activity.timestamp&quot;</span></span>\n<span class="line">          <span class="token operator">:</span>placement<span class="token operator">=</span><span class="token string">&quot;placement&quot;</span></span>\n<span class="line">        <span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span>el<span class="token operator">-</span>card <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box-card&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">&quot;header&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;clearfix&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">              <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">                <span class="token operator">&lt;</span>el<span class="token operator">-</span>col</span>\n<span class="line">                  <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;headerCol.span&quot;</span></span>\n<span class="line">                  <span class="token operator">:</span>offset<span class="token operator">=</span><span class="token string">&quot;headerCol.offset&quot;</span></span>\n<span class="line">                  v<span class="token operator">-</span>bind<span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">                  v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(headerCol, index) in activity.headerCols&quot;</span></span>\n<span class="line">                  <span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> headerCol<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col</span>\n<span class="line">                <span class="token operator">&gt;</span></span>\n<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">              <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;float: left&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> activity<span class="token punctuation">.</span>headerLeft <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>\n<span class="line">              <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;float: right&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> activity<span class="token punctuation">.</span>headerRight <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span>el<span class="token operator">-</span>row</span>\n<span class="line">              v<span class="token operator">-</span>bind<span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">              v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(content, index) in activity.contents&quot;</span></span>\n<span class="line">            <span class="token operator">&gt;</span></span>\n<span class="line">              <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;24&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> content <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>timeline<span class="token operator">-</span>item<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>timeline<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>sun<span class="token operator">-</span>dialog<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> SunDialog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ibms/ui&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;timelineDialog&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> SunDialog <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">visible</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">customComponentParams</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span></span>\n<span class="line">      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">activities</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//时间线数据</span></span>\n<span class="line">      <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//加载遮罩</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">dialogVisible</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visible</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;update:visible&#39;</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">reverse</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">//默认正序，数据查询出的方向</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>reverse <span class="token operator">||</span> <span class="token boolean">false</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">placement</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">//时间戳位置</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>placement <span class="token operator">||</span> <span class="token string">&#39;top&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>title <span class="token operator">||</span> <span class="token string">&#39;详细&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>title <span class="token operator">=</span> val</span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>width <span class="token operator">||</span> <span class="token string">&#39;60%&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">let</span> heightval <span class="token operator">=</span></span>\n<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>height <span class="token operator">||</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">*</span> <span class="token number">0.65</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">height:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>heightval<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px;overflow: auto;</span><span class="token template-punctuation string">`</span></span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">reqUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>reqUrl <span class="token operator">||</span> <span class="token string">&#39;&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">reqParam</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customComponentParams<span class="token punctuation">.</span>reqParam <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reqUrl<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>reqParam<span class="token punctuation">)</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>activities <span class="token operator">=</span> response<span class="token punctuation">.</span>data</span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span> scoped<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token punctuation">.</span>myTimeline <span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token punctuation">.</span>el<span class="token operator">-</span>timeline<span class="token operator">-</span>item__timestamp <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">303133</span><span class="token punctuation">;</span></span>\n<span class="line">    font<span class="token operator">-</span>size<span class="token operator">:</span> 14px<span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【树形表格-支持右击菜单】" tabindex="-1"><a class="header-anchor" href="#【树形表格-支持右击菜单】"><span>【树形表格，支持右击菜单】</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 树形表格控件，带右击菜单 <span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;myTreeTable&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>table</span>\n<span class="line">      <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">&quot;tableData&quot;</span></span>\n<span class="line">      style<span class="token operator">=</span><span class="token string">&quot;width: 100%; margin-bottom: 20px&quot;</span></span>\n<span class="line">      row<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span></span>\n<span class="line">      border</span>\n<span class="line">      <span class="token keyword">default</span><span class="token operator">-</span>expand<span class="token operator">-</span>all</span>\n<span class="line">      <span class="token operator">:</span>tree<span class="token operator">-</span>props<span class="token operator">=</span><span class="token string">&quot;{ children: &#39;children&#39;, hasChildren: &#39;hasChildren&#39; }&quot;</span></span>\n<span class="line">      @row<span class="token operator">-</span>contextmenu<span class="token operator">=</span><span class="token string">&quot;rightClickMenu&quot;</span></span>\n<span class="line">    <span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">&quot;date&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;日期&quot;</span> sortable width<span class="token operator">=</span><span class="token string">&quot;180&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">&quot;scope&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-icon-time&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span></span>\n<span class="line">          <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;margin-left: 10px&quot;</span></span>\n<span class="line">            <span class="token operator">&gt;</span><span class="token operator">&lt;</span>el<span class="token operator">-</span>link type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;timeLinkEvent(scope.row.id)&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>\n<span class="line">              scope<span class="token punctuation">.</span>row<span class="token punctuation">.</span>date</span>\n<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span</span>\n<span class="line">          <span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">&quot;name&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;姓名&quot;</span> sortable width<span class="token operator">=</span><span class="token string">&quot;180&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">&quot;address&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;地址&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;contextmenu&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;rightMenuVisible&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;menu&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>div</span>\n<span class="line">        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;contextmenu__item&quot;</span></span>\n<span class="line">        v<span class="token operator">-</span>bind<span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span></span>\n<span class="line">        v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item, index) in menuData&quot;</span></span>\n<span class="line">        @click<span class="token operator">=</span><span class="token string">&quot;rightMenuClick(item.type)&quot;</span></span>\n<span class="line">      <span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;treeTableDemo&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">tableData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//树表数据</span></span>\n<span class="line">      <span class="token literal-property property">menuData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//右击菜单</span></span>\n<span class="line">      <span class="token literal-property property">rightMenuVisible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">curClickRow</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">rightClickMenu</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//关闭浏览器右键默认事件</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initMenuData</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token comment">//初始化右击菜单</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showMenu</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.menu&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//显示右击菜单</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">initMenuData</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>curClickRow <span class="token operator">=</span> row</span>\n<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>row<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>menuData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;新增&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span></span>\n<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>menuData <span class="token operator">=</span> <span class="token punctuation">[</span></span>\n<span class="line">          <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;新增&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;edit&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;编辑&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;del&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;删除&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token punctuation">]</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token parameter">menu</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>rightMenuVisible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>rightMenuVisible <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line">      <span class="token keyword">let</span> menuWidth <span class="token operator">=</span> <span class="token number">100</span></span>\n<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX <span class="token operator">&gt;</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> menuWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">-</span> menuWidth <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">        menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">      <span class="token keyword">let</span> menuHeight <span class="token operator">=</span> <span class="token number">34.67</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>menuData<span class="token punctuation">.</span>length</span>\n<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientY <span class="token operator">&gt;</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> menuHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">-</span> menuHeight <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">        menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hideMenu<span class="token punctuation">)</span> <span class="token comment">// 给整个document新增监听鼠标事件，点击任何位置执行hideMenu方法</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">hideMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>rightMenuVisible <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// 隐藏菜单栏</span></span>\n<span class="line">      document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hideMenu<span class="token punctuation">)</span> <span class="token comment">// 关掉监听</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">rightMenuClick</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>curClickRow<span class="token punctuation">)</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hideMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">timeLinkEvent</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> <span class="token punctuation">[</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;2016-05-02&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&#39;上海市普陀区金沙江路 1518 弄&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;2016-05-04&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&#39;上海市普陀区金沙江路 1517 弄&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;2016-05-01&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&#39;上海市普陀区金沙江路 1519 弄&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>\n<span class="line">          <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">31</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;2016-05-01&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&#39;上海市普陀区金沙江路 1519 弄&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;2016-05-01&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&#39;上海市普陀区金沙江路 1519 弄&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;2016-05-03&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;王小虎&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&#39;上海市普陀区金沙江路 1516 弄&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">]</span></span>\n<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span> scoped<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token punctuation">.</span>myTreeTable <span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token punctuation">.</span>contextmenu__item <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">display</span><span class="token operator">:</span> block<span class="token punctuation">;</span></span>\n<span class="line">    line<span class="token operator">-</span>height<span class="token operator">:</span> 34px<span class="token punctuation">;</span></span>\n<span class="line">    text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">.</span>contextmenu__item<span class="token operator">:</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">:</span>last<span class="token operator">-</span>child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    border<span class="token operator">-</span>bottom<span class="token operator">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">.</span>menu <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span></span>\n<span class="line">    background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span></span>\n<span class="line">    font<span class="token operator">-</span>size<span class="token operator">:</span> 12px<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">444040</span><span class="token punctuation">;</span></span>\n<span class="line">    border<span class="token operator">-</span>radius<span class="token operator">:</span> 4px<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span></span>\n<span class="line">    box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span></span>\n<span class="line">    border<span class="token operator">-</span>radius<span class="token operator">:</span> 3px<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    box<span class="token operator">-</span>shadow<span class="token operator">:</span> <span class="token number">0</span> 6px 12px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.175</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    white<span class="token operator">-</span>space<span class="token operator">:</span> nowrap<span class="token punctuation">;</span></span>\n<span class="line">    z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">.</span>contextmenu__item<span class="token operator">:</span>hover <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token literal-property property">background</span><span class="token operator">:</span> #66b1ff<span class="token punctuation">;</span></span>\n<span class="line">    border<span class="token operator">-</span>color<span class="token operator">:</span> #66b1ff<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token literal-property property">color</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【后台执行进度显示】" tabindex="-1"><a class="header-anchor" href="#【后台执行进度显示】"><span>【后台执行进度显示】</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 脚本执行进度组件，路由</span></span>\n<span class="line"><span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/scriptProgress/:urlParam&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;scriptProgress&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function-variable function">props</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">route</span><span class="token operator">:</span> Route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>route<span class="token punctuation">.</span>query<span class="token punctuation">,</span> <span class="token operator">...</span>route<span class="token punctuation">.</span>params <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@ibms/projectTools/views/other/myProgress.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 脚本执行进度组件 <span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;full&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;padding-top: 20%&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loadingText <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span></span>\n<span class="line">        <span class="token operator">&gt;</span><span class="token operator">&lt;</span>el<span class="token operator">-</span>progress <span class="token operator">:</span>percentage<span class="token operator">=</span><span class="token string">&quot;percent&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>progress</span>\n<span class="line">      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>row v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;percent == 100&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span></span>\n<span class="line">        <span class="token operator">&gt;</span><span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">&quot;closeWindow&quot;</span><span class="token operator">&gt;</span>关闭<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col</span>\n<span class="line">      <span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;myProgress&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">urlParam</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span></span>\n<span class="line">      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">getUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>urlParam<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">loadingText</span><span class="token operator">:</span> <span class="token string">&#39;后置脚本执行中，请稍候...&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">percent</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">scriptToken</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">initPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      request</span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>getUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?scriptToken=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>scriptToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>percent</span>\n<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>scriptToken <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>scriptToken</span>\n<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">==</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>loadingText <span class="token operator">=</span> <span class="token string">&#39;后置脚本执行完成&#39;</span></span>\n<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">          <span class="token punctuation">}</span></span>\n<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start <span class="token operator">&lt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">continue</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">closeWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>自动配套结果台账<span class="token operator">--</span><span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;full&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!showResult&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;padding-top: 20%&quot;</span><span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> <span class="token operator">:</span>offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loadingText <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> <span class="token operator">:</span>offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span></span>\n<span class="line">          <span class="token operator">&gt;</span><span class="token operator">&lt;</span>el<span class="token operator">-</span>progress <span class="token operator">:</span>percentage<span class="token operator">=</span><span class="token string">&quot;percent&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>progress</span>\n<span class="line">        <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span></span>\n<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line">    <span class="token operator">&lt;</span>TemplatePreview</span>\n<span class="line">      v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;showResult&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>client<span class="token operator">-</span>num<span class="token operator">=</span><span class="token string">&quot;clientNum&quot;</span></span>\n<span class="line">      <span class="token operator">:</span>template<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">&quot;templateKey&quot;</span></span>\n<span class="line">      @loadSuccess<span class="token operator">=</span><span class="token string">&quot;handleConfirm&quot;</span></span>\n<span class="line">    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>TemplatePreview<span class="token operator">&gt;</span></span>\n<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>\n<span class="line"><span class="token keyword">import</span> TemplatePreview <span class="token keyword">from</span> <span class="token string">&#39;@ibms/form/views/dataTemplate/preview.vue&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span></span>\n<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CLIENT_NUM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/consts&#39;</span></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;AutoMatchResPreview&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    TemplatePreview<span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">templateKey</span><span class="token operator">:</span> String<span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">clientNum</span><span class="token operator">:</span> <span class="token constant">CLIENT_NUM</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">showResult</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">percent</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">taskNum</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">reqTimes</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">loadingText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>taskNum <span class="token operator">!=</span> <span class="token number">0</span></span>\n<span class="line">        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">队列中任务数（</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>taskNum<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">）,请稍候...</span><span class="token template-punctuation string">`</span></span></span>\n<span class="line">        <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">==</span> <span class="token number">95</span> <span class="token operator">?</span> <span class="token string">&#39;库存更新中&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;自动配套中&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;，请稍候...&#39;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">autoMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">handleConfirm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">autoMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/purchases/materialStorage/autoMatch&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">initPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>reqTimes</span>\n<span class="line">      request</span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/purchases/materialStorage/readAutoMatchProgress&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>percent</span>\n<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>taskNum <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>taskNum</span>\n<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">==</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>showResult <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token keyword">let</span> _me <span class="token operator">=</span> <span class="token keyword">this</span></span>\n<span class="line">            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">              _me<span class="token punctuation">.</span><span class="token function">initPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>reqTimes <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span></span>\n<span class="line">          <span class="token punctuation">}</span></span>\n<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',29)],e={},o=(0,a(262).A)(e,[["render",function(s,n){return(0,p.uX)(),(0,p.CE)("div",null,t)}]]),l=JSON.parse('{"path":"/%E7%BB%84%E4%BB%B6%E5%8C%96%E9%A1%B5%E9%9D%A2.html","title":"组件化页面","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"1 功能性组件页面","slug":"_1-功能性组件页面","link":"#_1-功能性组件页面","children":[{"level":3,"title":"【导入页面定制】","slug":"【导入页面定制】","link":"#【导入页面定制】","children":[]},{"level":3,"title":"【自定义组件列表】","slug":"【自定义组件列表】","link":"#【自定义组件列表】","children":[]},{"level":3,"title":"【自定义组件刷新】","slug":"【自定义组件刷新】","link":"#【自定义组件刷新】","children":[]},{"level":3,"title":"【自定义对话框，vue定制】","slug":"【自定义对话框-vue定制】","link":"#【自定义对话框-vue定制】","children":[]},{"level":3,"title":"【人员选择器，vue定制】","slug":"【人员选择器-vue定制】","link":"#【人员选择器-vue定制】","children":[]}]},{"level":2,"title":"2 显示性组件页面","slug":"_2-显示性组件页面","link":"#_2-显示性组件页面","children":[{"level":3,"title":"【时间轴事件显示】","slug":"【时间轴事件显示】","link":"#【时间轴事件显示】","children":[]},{"level":3,"title":"【树形表格，支持右击菜单】","slug":"【树形表格-支持右击菜单】","link":"#【树形表格-支持右击菜单】","children":[]},{"level":3,"title":"【后台执行进度显示】","slug":"【后台执行进度显示】","link":"#【后台执行进度显示】","children":[]}]}],"git":{},"filePathRelative":"组件化页面.md"}')}}]);