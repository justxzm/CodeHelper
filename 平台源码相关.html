<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="https://vuejs.press/images/hero.png"><title>平台源码相关 | IBMS开发辅助</title><meta name="description" content="定制快人一步，范式化编程，更完善更稳定">
    <link rel="stylesheet" href="/CodeHelper/assets/css/styles.59ea3f1c.css">
    <link rel="preload" href="/CodeHelper/assets/js/runtime~app.19208902.js" as="script"><link rel="preload" href="/CodeHelper/assets/css/styles.59ea3f1c.css" as="style"><link rel="preload" href="/CodeHelper/assets/js/639.a736eac9.js" as="script"><link rel="preload" href="/CodeHelper/assets/js/app.e67bbaa2.js" as="script">
    <link rel="prefetch" href="/CodeHelper/assets/js/前后端代码段.html.3b6fcd02.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/范式化功能.html.3fbb4a58.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/组件化页面.html.ff3d23dc.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/数据库语句.html.4d9b568c.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/平台源码相关.html.a32f421c.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/业务工具类.html.8fbf4219.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/快速开始BAK.html.aa645313.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/快速开始.html.704c5d76.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/index.html.e652a897.js" as="script"><link rel="prefetch" href="/CodeHelper/assets/js/404.html.63643623.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/CodeHelper/"><!----><span class="vp-site-name" aria-hidden="true">IBMS开发辅助</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CodeHelper/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/CodeHelper/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html" aria-label="快速开始"><!---->快速开始<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="文档"><span class="title">文档</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="文档"><span class="title">文档</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81%E6%AE%B5.html" aria-label="前后端代码段"><!---->前后端代码段<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E8%8C%83%E5%BC%8F%E5%8C%96%E5%8A%9F%E8%83%BD.html" aria-label="范式化功能"><!---->范式化功能<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E7%BB%84%E4%BB%B6%E5%8C%96%E9%A1%B5%E9%9D%A2.html" aria-label="组件化页面"><!---->组件化页面<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E5%8F%A5.html" aria-label="数据库语句"><!---->数据库语句<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/CodeHelper/%E5%B9%B3%E5%8F%B0%E6%BA%90%E7%A0%81%E7%9B%B8%E5%85%B3.html" aria-label="平台源码相关"><!---->平台源码相关<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/CodeHelper/%E4%B8%9A%E5%8A%A1%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="工具类下载"><!---->工具类下载<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://justxzm.github.io/" aria-label="其他经验" rel="noopener noreferrer" target="_blank"><!---->其他经验<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CodeHelper/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/CodeHelper/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html" aria-label="快速开始"><!---->快速开始<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="文档"><span class="title">文档</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="文档"><span class="title">文档</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81%E6%AE%B5.html" aria-label="前后端代码段"><!---->前后端代码段<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E8%8C%83%E5%BC%8F%E5%8C%96%E5%8A%9F%E8%83%BD.html" aria-label="范式化功能"><!---->范式化功能<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E7%BB%84%E4%BB%B6%E5%8C%96%E9%A1%B5%E9%9D%A2.html" aria-label="组件化页面"><!---->组件化页面<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/CodeHelper/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E5%8F%A5.html" aria-label="数据库语句"><!---->数据库语句<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/CodeHelper/%E5%B9%B3%E5%8F%B0%E6%BA%90%E7%A0%81%E7%9B%B8%E5%85%B3.html" aria-label="平台源码相关"><!---->平台源码相关<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/CodeHelper/%E4%B8%9A%E5%8A%A1%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="工具类下载"><!---->工具类下载<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://justxzm.github.io/" aria-label="其他经验" rel="noopener noreferrer" target="_blank"><!---->其他经验<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">平台源码相关 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="平台源码相关" tabindex="-1"><a class="header-anchor" href="#平台源码相关"><span>平台源码相关</span></a></h1><h2 id="_1-相关源码位置" tabindex="-1"><a class="header-anchor" href="#_1-相关源码位置"><span>1 相关源码位置</span></a></h2><h3 id="_1-1-表单与列表" tabindex="-1"><a class="header-anchor" href="#_1-1-表单与列表"><span>1.1 表单与列表</span></a></h3><h4 id="【表单设计】" tabindex="-1"><a class="header-anchor" href="#【表单设计】"><span>【表单设计】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">packages/ibms-form/views/form/index.vue-编辑、form-design-edit(this.widgetForm、widget-panel、property-panel)</span>
<span class="line">PropertyPanel.vue(BasicsProperty)、BasicsProperty.vue</span>
<span class="line">FieldPanel.vue、basicComponents(controlsConfig.js)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程表单】" tabindex="-1"><a class="header-anchor" href="#【流程表单】"><span>【流程表单】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">StartFlow.vue-FormPreview.vue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【数字类型控件】" tabindex="-1"><a class="header-anchor" href="#【数字类型控件】"><span>【数字类型控件】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">#新增对齐方式配置</span>
<span class="line">ibms-biz/ibms-form/form-core/src/main/resources/template/form/pc/fieldControl.ftl</span>
<span class="line">ibms-ui/packages/ibms-form/components/control/FormInput.vue</span>
<span class="line">ibms-ui/packages/ibms-form/views/form/design/BasicsProperty.vue</span>
<span class="line">ibms-ui/packages/ibms-form/views/form/design/FieldPanel.vue</span>
<span class="line">ibms-ui/packages/ibms-form/views/form/design/controlsConfig.js</span>
<span class="line">ibms-ui/packages/ibms-ui/packages/sun-input/src/index.vue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【单选框联动】" tabindex="-1"><a class="header-anchor" href="#【单选框联动】"><span>【单选框联动】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ibms-ui/packages/sun-radio/src/index.vue-mountedLinkage</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【文件上传】" tabindex="-1"><a class="header-anchor" href="#【文件上传】"><span>【文件上传】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ibms-ui/packages/sun-upload/src/index.vue-beforeUpload</span>
<span class="line">ibms-ui/packages/sun-upload/src/index.vue #文件名称</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【表单数据视图】" tabindex="-1"><a class="header-anchor" href="#【表单数据视图】"><span>【表单数据视图】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">FormDataView.vue、TemplateDynamicView.vue、dataTemplateList_manage_first.ftl(scriptClick)、FormPreview.vue </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【列表审批时间超期字段值】" tabindex="-1"><a class="header-anchor" href="#【列表审批时间超期字段值】"><span>【列表审批时间超期字段值】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">FormDataTemplateManagerImpl.java-_overdue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【列表按钮权限】" tabindex="-1"><a class="header-anchor" href="#【列表按钮权限】"><span>【列表按钮权限】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">FormDataTemplateManagerImpl.java-getDisplay-getManagePermission</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-2-流程相关" tabindex="-1"><a class="header-anchor" href="#_1-2-流程相关"><span>1.2 流程相关</span></a></h3><h4 id="【流程设计】" tabindex="-1"><a class="header-anchor" href="#【流程设计】"><span>【流程设计】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ibms-bpmn/views/def/index.vue(settingDialogVisible)</span>
<span class="line">设置页：ibms-bpmn/views/def/edit.vue-created-getBpmDefInfo(NodeSetController.java-nodeDefSet)</span>
<span class="line">流程配置：ibms-bpmn/views/def/components/DefSetting/index.vue-handleSave(保存配置)</span>
<span class="line">流程配置-属性：DefProperties.vue</span>
<span class="line">流程表单节点属性：StartFlow.vue-nodeProperties</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程授权判断】" tabindex="-1"><a class="header-anchor" href="#【流程授权判断】"><span>【流程授权判断】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">StartFlow.vue-startRightByDefId(/bpmn/def/auth/startRightByDefId)-RolePermissionStrategy.java(getProfileByUserCode)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【流程催办、定时任务】" tabindex="-1"><a class="header-anchor" href="#【流程催办、定时任务】"><span>【流程催办、定时任务】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">job.admin.addresses: http://192.168.2.181:20700</span>
<span class="line">job.enabled: true</span>
<span class="line">@XxlJob(&quot;syncDataFromCH&quot;)</span>
<span class="line">TaskCreateEventListener.java(createBpmReminder)</span>
<span class="line">XxlJobRemotingUtil.java(postBody)</span>
<span class="line">BpmTaskReminderJob-bpmnSendMessage、expirationAction</span>
<span class="line">XxlJobConfig</span>
<span class="line">XxlJobAdminConfig</span>
<span class="line">XxlJobScheduler</span>
<span class="line">JobRegistryHelper</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程候选人框】" tabindex="-1"><a class="header-anchor" href="#【流程候选人框】"><span>【流程候选人框】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">StartFlow.vue-TaskIdentityHandle(taskIdentityHandleVisible)-filterBpmNodeTranUser.bpmIdentities</span>
<span class="line">TaskController.java(tranTaskUserMap)-DefaultBpmNodeTranUser.java(getNodeUserMap)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程图节点明细】" tabindex="-1"><a class="header-anchor" href="#【流程图节点明细】"><span>【流程图节点明细】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">FlowImage.vue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【流程追回】" tabindex="-1"><a class="header-anchor" href="#【流程追回】"><span>【流程追回】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">FlowImage.vue-getRecoverNode</span>
<span class="line">SELECT * FROM bpm_check_opinion</span>
<span class="line">WHERE proc_inst_id_ = &#39;1655385624556863488&#39;</span>
<span class="line">AND auditor_ is not null</span>
<span class="line">AND status_ in (&#39;agree&#39;, &#39;oppose&#39;, &#39;signPass&#39;, &#39;signNoPass&#39;, &#39;skip&#39;,&#39;freeJump&#39;)</span>
<span class="line">order by complete_time_ ,sn_</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程驳回】" tabindex="-1"><a class="header-anchor" href="#【流程驳回】"><span>【流程驳回】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">BackTaskBeforePlugin.java-execute-this.getBackTargetExeStack</span>
<span class="line">BackToStartBeforePlugin.java</span>
<span class="line">&lt;select id=&quot;getInitStack&quot; resultMap=&quot;BpmExeStack&quot;&gt;</span>
<span class="line">    SELECT * FROM bpm_exe_stack</span>
<span class="line">    WHERE proc_inst_id_=#{procInstId,jdbcType=VARCHAR} and parent_id_=&#39;0&#39;</span>
<span class="line">&lt;/select&gt;</span>
<span class="line">CommonBackBeforePlugin.java</span>
<span class="line">&lt;select id=&quot;getStackByBpmTaskId&quot; resultMap=&quot;BpmExeStack&quot;&gt;</span>
<span class="line">    SELECT DISTINCT a.* from BPM_EXE_STACK a</span>
<span class="line">    left join BPM_EXE_STACK_RELATION b on  a.id_ = b.TO_STACK_ID_</span>
<span class="line">    WHERE a.BPMN_TASK_ID_ = #{taskId} or b.TO_TASK_ID_=#{taskId}</span>
<span class="line">&lt;/select&gt;</span>
<span class="line">查询有问题的流程</span>
<span class="line">SELECT T1.PROC_DEF_ID_,T5.NAME_,T1.NAME_,T1.TASK_DEF_KEY_,T3.NAME,T3.CODE,T4.NAME,T4.CODE,T6.BUSINESS_KEY_</span>
<span class="line">FROM ACT_RU_TASK T1 </span>
<span class="line">LEFT JOIN bpm_exe_stack T2 ON (T1.PROC_INST_ID_=T2.proc_inst_id_ and T2.PARENT_ID_=&#39;0&#39;)</span>
<span class="line">LEFT JOIN CWM_SYS_USER T3 ON T1.OWNER_=T3.ID</span>
<span class="line">LEFT JOIN CWM_SYS_USER T4 ON T1.ASSIGNEE_=T4.ID</span>
<span class="line">LEFT JOIN BPM_DEFINITION  T5  ON T1.PROC_DEF_ID_=T5.BPMN_DEF_ID_</span>
<span class="line">LEFT JOIN BPM_PRO_INST T6 ON T1.PROC_INST_ID_=T6.BPMN_INST_ID_</span>
<span class="line">WHERE T2.ID_ IS NULL AND INSTR(T5.NAME_,&#39;外部收文&#39;)&gt;0 AND INSTR(T1.NAME_,&#39;领导审批&#39;)&gt;0</span>
<span class="line">BpmExeStack查询优化</span>
<span class="line">SELECT * FROM (</span>
<span class="line">    SELECT * FROM BPM_EXE_STACK </span>
<span class="line">    START WITH (PROC_INST_ID_=&#39;1642775225193988096&#39; AND BPMN_TASK_ID_=&#39;1642775227647655937&#39;)</span>
<span class="line">    CONNECT by PRIOR PARENT_ID_=ID_</span>
<span class="line">) WHERE PARENT_ID_=&#39;0&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程批量启动】" tabindex="-1"><a class="header-anchor" href="#【流程批量启动】"><span>【流程批量启动】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">SunActivitiInstanceServiceImpl.java(startProcessInstance)、SunActivitiListenerConfig.java(createTaskCreateListener)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【审批意见回填】" tabindex="-1"><a class="header-anchor" href="#【审批意见回填】"><span>【审批意见回填】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">StartFlow.vue-getOpinionBackFiled审批意见回填</span>
<span class="line">DefProperties.vue-审批意见回填字段</span>
<span class="line">OpinionController.java(getOpinionBackFiled)</span>
<span class="line">DefaultBpmOpinionService.java(getOpinionBackFiled)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【流程脚本错误提示】" tabindex="-1"><a class="header-anchor" href="#【流程脚本错误提示】"><span>【流程脚本错误提示】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">BpmScriptUtil</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-3-其他" tabindex="-1"><a class="header-anchor" href="#_1-3-其他"><span>1.3 其他</span></a></h3><h4 id="【路由】" tabindex="-1"><a class="header-anchor" href="#【路由】"><span>【路由】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">record/views/recFun/edit.vue</span>
<span class="line">record/components/firstMultiTabView.vue</span>
<span class="line">src/store/modules/menu.ts</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【菜单路由】" tabindex="-1"><a class="header-anchor" href="#【菜单路由】"><span>【菜单路由】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">permission.ts-GenerateMenus-addRoute</span>
<span class="line">menu.ts-GenerateMenus-filterAsyncRouter-lazyLoadRouter</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【组织管理】" tabindex="-1"><a class="header-anchor" href="#【组织管理】"><span>【组织管理】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"># 组织人员</span>
<span class="line">ibms-mdm/views/org/user/index.vue</span>
<span class="line">UserPositionController.java(getUserPosByOrgId)</span>
<span class="line">order by orgSn, IS_CHARGE desc, name_sn_</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【人员选择器】" tabindex="-1"><a class="header-anchor" href="#【人员选择器】"><span>【人员选择器】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">FormPreview.vue、OnlineForm.vue、FormUserSelector.vue、UserSelector.vue、Selector.vue(UserSelectorDialogV1)</span>
<span class="line">UserSelectorDialogV1.vue-editVisible</span>
<span class="line">MdmGroupManagerImpl.java</span>
<span class="line">回填：BasicsProperty.vue、controlsConfig.js</span>
<span class="line">回填函数：Selector.vue(selectedChange)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【常用组维护】" tabindex="-1"><a class="header-anchor" href="#【常用组维护】"><span>【常用组维护】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ibms-mdm/views/group/index.vue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【登录ip校验】" tabindex="-1"><a class="header-anchor" href="#【登录ip校验】"><span>【登录IP校验】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ResponseErrorEnums.java(NOT_FOUND_ADDRESS_APPROVE)</span>
<span class="line">JdbcUserDetailsService.java(isCheckIpLogin)</span>
<span class="line">CWM_MDM_SECURITY_PARAMS</span>
<span class="line">NO_IP_LOGIN_SYSTEM_(三员是否指定IP登录)：0关闭，1开启</span>
<span class="line">ALARNM_LOG_SYSTEM_(三员登录日志等级)：0限制登录，2日志告警</span>
<span class="line">NO_IP_LOGIN_USER_(普通用户是否指定IP登录)：0关闭，1开启</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【机器密级显示】" tabindex="-1"><a class="header-anchor" href="#【机器密级显示】"><span>【机器密级显示】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ibms-sys/views/log/item/index.vue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【查询参数】" tabindex="-1"><a class="header-anchor" href="#【查询参数】"><span>【查询参数】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">DefaultFieldLogic.java(getCompare)</span>
<span class="line">private queryParams = {</span>
<span class="line">    fieldLogic: {</span>
<span class="line">      Q$f_spzt$SL: &#39;ywc&#39;,</span>
<span class="line">    },</span>
<span class="line">    sort: &#39;f_yylx, f_zssx&#39;,</span>
<span class="line">    order: &#39;desc, asc&#39;,</span>
<span class="line">    limit: 20,</span>
<span class="line">    page: 1,</span>
<span class="line">    defaultWhere: &#39;&#39;,</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【自定义对话框】" tabindex="-1"><a class="header-anchor" href="#【自定义对话框】"><span>【自定义对话框】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">ibms-form/components/control/FormDialog.vue</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="【统一异常处理】" tabindex="-1"><a class="header-anchor" href="#【统一异常处理】"><span>【统一异常处理】</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">WebExceptionHandler.java</span>
<span class="line">LogErrorAopAspect.java</span>
<span class="line">InstanceActionController.java(start)</span>
<span class="line">DefaultDatabaseContext(获取当前数据源异常)</span>
<span class="line">BpmnExceptionUtil.java</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【多tab管理】" tabindex="-1"><a class="header-anchor" href="#【多tab管理】"><span>【多Tab管理】</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">multiTabPreview<span class="token punctuation">.</span>vue</span>
<span class="line">multiTabDynamicView<span class="token punctuation">.</span>vue</span>
<span class="line">multiTab<span class="token punctuation">.</span>ftl </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-其他配置备忘录" tabindex="-1"><a class="header-anchor" href="#_2-其他配置备忘录"><span>2 其他配置备忘录</span></a></h2><h3 id="【流程启动跳过配置】" tabindex="-1"><a class="header-anchor" href="#【流程启动跳过配置】"><span>【流程启动跳过配置】</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">skipFirstNode</span>
<span class="line">false：不跳过</span>
<span class="line">true：按流程配置执行</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【ant-design引入】" tabindex="-1"><a class="header-anchor" href="#【ant-design引入】"><span>【ant-design引入】</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line">main<span class="token punctuation">.</span>ts</span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&#39;@/store/antd-use.js&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【nginx文件上传大小限制】" tabindex="-1"><a class="header-anchor" href="#【nginx文件上传大小限制】"><span>【nginx文件上传大小限制】</span></a></h3><div class="language-nginx line-numbers-mode" data-highlighter="prismjs" data-ext="nginx" data-title="nginx"><pre class="language-nginx"><code><span class="line"><span class="token comment">#上传文件的大小限制 默认1m</span></span>
<span class="line"><span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">1024m</span></span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="【拦截器】" tabindex="-1"><a class="header-anchor" href="#【拦截器】"><span>【拦截器】</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqlCostInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">Interceptor</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_3-平台优化闭环清单" tabindex="-1"><a class="header-anchor" href="#_3-平台优化闭环清单"><span>3 平台优化闭环清单</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">一、表单</span>
<span class="line">（1）人员选择框优化：</span>
<span class="line">    a.去除右下角“清除”按钮，和清空有歧义。</span>
<span class="line">    b.不显示性别，新增显示电话号码/办公电话。</span>
<span class="line">    c.默认100分页。</span>
<span class="line">（2）人员选择常用组优化：</span>
<span class="line">    a.层级扁平化。</span>
<span class="line">    b.部门信息取值。</span>
<span class="line">    c.表格高度计算。</span>
<span class="line">    d.菜单按钮常显。</span>
<span class="line">    e.人员按组织、负责人、姓名排序。</span>
<span class="line">    f.公共组维护修改，新增排序设置功能。</span>
<span class="line">（3）数字字段控件优化</span>
<span class="line">    a.新增对齐方式配置。</span>
<span class="line">    b.优化丢失焦点时在原输入框显示格式化内容。</span>
<span class="line">    c.优化禁用、只读状态时默认显示已格式化数据。</span>
<span class="line">    d.解决中文货币格式化时，明细页显示多一个单位问题。</span>
<span class="line">    e.解决金额为0时，中文货币没有格式化、千分位格式化丢失单位问题。</span>
<span class="line">（4）人员选择器新增性别、电话、出生日期等基本信息回填。</span>
<span class="line">（5）人员选择器部门过滤新增显示当前人。</span>
<span class="line">（6）下拉控件联动设为只读时不显示值问题解决。</span>
<span class="line">（7）表单主子表中自定义对话框，改为点击输入框后按钮打开，输入框可手动输入。</span>
<span class="line">（8）开关控件在明细表单中只显示值文本问题解决。</span>
<span class="line">二、列表</span>
<span class="line">（1）数据视图批量删除多删数据问题解决。</span>
<span class="line">（2）数据视图新增非密数据未保存再编辑时，密级丢失问题解决。</span>
<span class="line">（3）列表新增“审批超48小时”判断字段值。</span>
<span class="line">（4）列表导入优化：</span>
<span class="line">    a.新增具体单元格校验提示。</span>
<span class="line">    b.新增表头校验。</span>
<span class="line">    c.新增支持表头加“*”必填标识。</span>
<span class="line">    d.优化导入策略，保证数据导入原子性。</span>
<span class="line">（5）解决定制页面中表单列表组件刷新回调不生效问题（加了回调）。</span>
<span class="line">（6）解决操作列按钮分页切换时显示隐藏控制bug，受上一页权限信息影响会丢失按钮。</span>
<span class="line">（7）解决表单列表表头点击排序报500bug。</span>
<span class="line">（8）左侧REST接口过滤树不能正常显示，this_值域冲突报错问题解决。</span>
<span class="line">二、流程</span>
<span class="line">（1）流程催办设置功能使用方式。</span>
<span class="line">（2）流程“审批意见回填”新增时间人员信息，“审批人回填”新增userCode回填。</span>
<span class="line">（3）会签节点新增支持审批意见、审批人回填。</span>
<span class="line">（4）流程候选人排序优化，按部门、组织领导、姓名排序。</span>
<span class="line">（5）流程候选人查询优化，减少一次多余查询。</span>
<span class="line">（6）流程候选人选择确认框改为穿梭框。</span>
<span class="line">（7）解决子流程不能终止问题（712应用系统授权申请）。</span>
<span class="line">（8）解决脚本启动的流程不能驳回发起人问题（启动参数使用问题）。</span>
<span class="line">（9）新增流程审批意见默认显示设置功能。</span>
<span class="line">（10）自由跳转节点不能追回问题解决。</span>
<span class="line">（11）流程不能驳回、驳回到发起人问题处理。</span>
<span class="line">（12）多个同步节点都无候选人，候选框显示处理。</span>
<span class="line">（13）多个分支节点都不显示候选人，候选框隐藏处理。</span>
<span class="line">（14）流程执行，任务找不到提示优化。</span>
<span class="line">（15）流程批量启动，集合多线程不安全报错问题测试发现并解决。</span>
<span class="line">（16）流程后置脚本优化：返回失败时前端抛出提示信息，阻止流程往下走。</span>
<span class="line">三、其他</span>
<span class="line">（1）待办、已办、我的申请、我的草稿，支持所有字段查询、时间段、状态下拉查询。</span>
<span class="line">（2）流程审批页方屏显示器适配1280×1024。</span>
<span class="line">（3）文件上传加解密优化，解决大文件加解密内存溢出问题。</span>
<span class="line">（4）文件上传文件名过长挤压布局宽度解决。</span>
<span class="line">（5）解决角色中配置组织、岗位、职务，流程取不到人、流程授权不生效问题。</span>
<span class="line">（6）文件分块上传后下载解码不正确问题。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/CodeHelper/assets/js/runtime~app.19208902.js" defer></script><script src="/CodeHelper/assets/js/639.a736eac9.js" defer></script><script src="/CodeHelper/assets/js/app.e67bbaa2.js" defer></script>
  </body>
</html>
